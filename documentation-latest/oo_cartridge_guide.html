<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="Asciidoctor 0.1.4" name="generator">
<meta content="OpenShift Origin Documentation Project &lt;dev@lists.openshift.redhat.com&gt;" name="author">
<title>OpenShift Origin Cartridge Guide</title>
<style>@import url(http://openshift.redhat.com/app/assets/overpass.css);
@import url(http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.0/css/font-awesome.css);
/*
Origin theme source file

To build it:
- clone the asciidoctor-stylesheet-factory repo
- copy this theme file to the sass folder inside the repo
- copy the settings file to the sass/settings file inside the repo
- cd to the cloned repo
- bundle install
- compass compile
- compiled stylesheet is in the stylesheets/ directory
*/
/* Generated by Font Squirrel (http://www.fontsquirrel.com) on July 24, 2013 */
@font-face { font-family: 'source_code_pro'; src: url("fonts/sourcecodepro-regular-webfont.eot"); src: url("fonts/sourcecodepro-regular-webfont.eot?#iefix") format("embedded-opentype"), url("fonts/sourcecodepro-regular-webfont.woff") format("woff"), url("fonts/sourcecodepro-regular-webfont.ttf") format("truetype"), url("sourcecodepro-regular-webfont.svg#source_code_proregular") format("svg"); font-weight: normal; font-style: normal; }

/*
Settings and overrides for the Origin theme
*/
/* normalize.css v2.1.1 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address styling not present in IE 8/9. */
[hidden] { display: none; }

/* ========================================================================== Base ========================================================================== */
/** 1. Prevent system color scheme's background color being used in Firefox, IE, and Opera. 2. Prevent system color scheme's text color being used in Firefox, IE, and Opera. 3. Set default font family to sans-serif. 4. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { background: #fff; /* 1 */ color: #000; /* 2 */ font-family: sans-serif; /* 3 */ -ms-text-size-adjust: 100%; /* 4 */ -webkit-text-size-adjust: 100%; /* 4 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

a:focus { outline: none; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .ulist > .title, .olist > .title, .dlist > .title, .qlist > .title, .tableblock > caption { line-height: 1.4; color: #6f6f6f; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #006699; text-decoration: none; line-height: inherit; }
a:hover, a:focus { color: #005580; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Overpass, sans-serif; font-weight: bold; font-style: normal; color: #222222; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #6f6f6f; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: bold; color: #7f0a0c; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }

blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Print styles.  Inlined to avoid required HTTP connection: www.phpied.com/delay-loading-your-print-css/ Credit to Paul Irish and HTML5 Boilerplate (html5boilerplate.com)
*/
.print-only { display: none !important; }

@media print { * { background: transparent !important; color: #000 !important; /* Black prints faster: h5bp.com/s */ box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; /* h5bp.com/t */ }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

/*
.clearfix,
.floatend { zoom: 1; &:before, &:after { content: " "; display: table; } &:after { clear: both; }
}
*/
code { font-size: inherit; padding: 0; white-space: nowrap; background-color: inherit; border: 0 solid #dddddd; -webkit-border-radius: 0; border-radius: 0; text-shadow: none; }

kbd.keyseq { color: #555555; }

kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

kbd kbd:first-child { margin-left: 0; }

kbd kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: #090909; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#header { margin-bottom: 2.5em; }
#header > h1 { color: #222222; font-weight: bold; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }

#toc { border-bottom: 0 solid #dddddd; padding-bottom: 1.25em; }
#toc > ul, #toc > ol { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a, #toc ol.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1, #toc ol.sectlevel0 ol.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul, #toc ol { list-style-type: none; }

#toctitle { color: #6f6f6f; }

@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #dddddd; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul, #toc.toc2 > ol { font-size: .95em; }
  #toc.toc2 ul ul, #toc.toc2 ol ol { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1, #toc.toc2 ol.sectlevel0 ol.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }

#footer-text { color: #dddddd; line-height: 1.44; }

.sect1 { padding-bottom: 1.25em; }

.sect1 + .sect1 { border-top: 0 solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #222222; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #151515; }

.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .ulist > .title, .olist > .title, .dlist > .title, .qlist > .title { text-align: left; font-weight: bold; }

.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > .paragraph:last-child > p { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #6f6f6f; margin-top: 0; line-height: 1.6; }
.sidebarblock > .content > .paragraph:last-child p { margin-bottom: 0; }

pre { color: black; font-family: source_code_pro, monospace, serif; overflow-x: auto; line-height: 1.4; }

.verseblock { margin-bottom: 1.25em; }

.literalblock, .listingblock { margin-bottom: 1.25em; }
.literalblock > .content > pre, .listingblock > .content > pre { background: #eeeeee; color: black; font-family: source_code_pro, monospace, serif; border-width: 0; padding: 0.8em 0.8em 0.6em 0.8em; word-wrap: break-word; line-height: 1.4; }
.literalblock > .content > pre.nowrap, .listingblock > .content > pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content > pre > code, .listingblock > .content > pre > code { font-size: 1em; white-space: inherit; color: black; font-family: source_code_pro, monospace, serif; padding: 0; background: none; font-weight: normal; border: none; }
@media only screen { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content > pre, .listingblock > .content > pre { font-size: 1em; } }

.listingblock:hover .xml:before { content: "xml"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .html:before { content: "html"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .ruby:before { content: "ruby"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .asciidoc:before { content: "asciidoc"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .java:before { content: "java"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .javascript:before { content: "javascript"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .css:before { content: "css"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }
.listingblock:hover .scss:before { content: "scss"; text-transform: uppercase; float: right; font-size: 0.9em; color: #999; }

.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: 0.8125em; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }

table thead th, table tfoot th { font-weight: bold; }

table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 0; border-radius: 0; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }

table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }

table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }

table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }

th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }

th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }

th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }

th.tableblock.halign-top, td.tableblock.halign-top { vertical-align: top; }

th.tableblock.halign-bottom, td.tableblock.halign-bottom { vertical-align: bottom; }

th.tableblock.halign-middle, td.tableblock.halign-middle { vertical-align: middle; }

p.tableblock.header { color: #222222; font-weight: bold; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist { list-style-type: none; margin-left: 0.625em; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

td.hdlist1 { vertical-align: top; padding-right: .8em; font-weight: bold; }

.qanda > ol > li > p:first-child { color: #005580; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: none; box-shadow: none; }

.imageblock { margin-bottom: 1.25em; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }

#footnotes { padding: 0.75em 0.375em; margin-bottom: 1.25em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; }

.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: none; cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #006699; color: #004c73; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }

nav.global { background: #222; width: 100%; height: 4em; }
nav.global ul { list-style-type: none; margin: 0; }
nav.global li { display: inline-block; }
nav.global a { display: block; padding: .5em 1em; font-family: Overpass; font-size: 1.1em; color: white; }
nav.global a:hover { color: #ef2e32; }
nav.global a img { margin-top: .25em; height: 2.75em; }

#header > h1 { border: none; }

#toc { background: #eee; border-right: none; }
#toc.toc2 { box-shadow: 1px 0 1px rgba(0, 0, 0, 0.3); }

code { font-family: source_code_pro; }

.admonitionblock td.icon .icon-tip:before { color: #cc6; text-shadow: none; }

#footer { background-image: url("images/panda.png"); background-position: right bottom; background-repeat: no-repeat; }

/* Alignment Styles */
.halign-left { text-align: left }
.halign-center { text-align: center }
.halign-right { text-align: right }

.valign-top { vertical-align: top }
.valign-middle { vertical-align: middle }
.valign-bottom { vertical-align: bottom }</style>
<link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body class="article toc2">
<nav class="global">
<ul>
<li>
<a href="http://openshift.github.io">
<img alt="OpenShift Origin" src="images/logo.png">
</a>
</li>
<li>
<a href="index.html">Documentation Home</a>
</li>
</ul>
</nav>
<div id="header">
<h1>OpenShift Origin Cartridge Guide</h1>
<span id="author">OpenShift Origin Documentation Project &lt;dev@lists.openshift.redhat.com&gt;</span>
<br>
<span id="revdate">LATEST DOC UPDATES</span>
<div class="toc2" id="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#10gen-mms-agent">1. 10gen MMS Agent</a></li>
<li><a href="#cron">2. Cron</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#installation">2.1. Installation</a></li>
<li><a href="#creating-a-job">2.2. Creating a job</a></li>
<li><a href="#installing-the-job">2.3. Installing the job</a></li>
<li><a href="#execution-timing">2.4. Execution timing</a></li>
<li><a href="#see-also">2.5. See also</a></li>
</ul>
</li>
<li><a href="#diy">3. DIY</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#get-started">3.1. Get started</a></li>
<li><a href="#repo-layout">3.2. Repo layout</a></li>
<li><a href="#environment-variables">3.3. Environment Variables</a></li>
</ul>
</li>
<li><a href="#jbossas">4. JBossAS</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#template-repository-layout">4.1. Template Repository Layout</a></li>
<li><a href="#layout-and-deployment-options">4.2. Layout and Deployment Options</a></li>
<li><a href="#environment-variables-2">4.3. Environment Variables</a></li>
<li><a href="#markers">4.4. Markers</a></li>
<li><a href="#jboss-cli">4.5. JBoss CLI</a></li>
</ul>
</li>
<li><a href="#jbosseap">5. JBossEAP</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#template-repository-layout-2">5.1. Template Repository Layout</a></li>
<li><a href="#layout-and-deployment-options-2">5.2. Layout and Deployment Options</a></li>
<li><a href="#environment-variables-3">5.3. Environment Variables</a></li>
<li><a href="#markers-2">5.4. Markers</a></li>
<li><a href="#jboss-cli-2">5.5. JBoss CLI</a></li>
</ul>
</li>
<li><a href="#tomcat">6. Tomcat (JBossEWS)</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#template-repository-layout-3">6.1. Template Repository Layout</a></li>
<li><a href="#layout-and-deployment-options-3">6.2. Layout and Deployment Options</a></li>
<li><a href="#environment-variables-4">6.3. Environment Variables</a></li>
<li><a href="#tomcat-cartridge-integrations">6.4. Cartridge Integrations</a></li>
<li><a href="#markers-3">6.5. Markers</a></li>
</ul>
</li>
<li><a href="#jenkins">7. Jenkins</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#template-repository-layout-4">7.1. Template Repository Layout</a></li>
<li><a href="#quickstart">7.2. Quickstart</a></li>
<li><a href="#building-with-jenkins">7.3. Building with Jenkins</a></li>
<li><a href="#markers-4">7.4. Markers</a></li>
<li><a href="#debugging-jenkins">7.5. Debugging Jenkins</a></li>
</ul>
</li>
<li><a href="#jenkins-client">8. Jenkins Client</a></li>
<li><a href="#mariadb">9. MariaDB</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#environment-variables-5">9.1. Environment Variables</a></li>
</ul>
</li>
<li><a href="#mongodb">10. MongoDB</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#environment-variables-6">10.1. Environment Variables</a></li>
</ul>
</li>
<li><a href="#mysql">11. MySQL</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#environment-variables-7">11.1. Environment Variables</a></li>
</ul>
</li>
<li><a href="#nodejs">12. NodeJS</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#template-repository-layout-5">12.1. Template Repository Layout</a></li>
<li><a href="#environment-variables-8">12.2. Environment Variables</a></li>
<li><a href="#markers-5">12.3. Markers</a></li>
<li><a href="#development-mode">12.4. Development Mode</a></li>
<li><a href="#local-development-testing">12.5. Local Development + Testing</a></li>
</ul>
</li>
<li><a href="#perl">13. Perl</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#template-repository-layout-6">13.1. Template Repository Layout</a></li>
<li><a href="#cartridge-layout">13.2. Cartridge Layout</a></li>
<li><a href="#markers-6">13.3. Markers</a></li>
</ul>
</li>
<li><a href="#php">14. PHP</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#template-repository-layout-7">14.1. Template Repository Layout</a></li>
<li><a href="#document-root">14.2. Document root</a></li>
<li><a href="#php-include_path">14.3. PHP include_path</a></li>
<li><a href="#markers-7">14.4. Markers</a></li>
</ul>
</li>
<li><a href="#phpmyadmin">15. phpMyAdmin</a></li>
<li><a href="#postgresql">16. PostgreSQL</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#template-repository-layout-8">16.1. Template Repository Layout</a></li>
<li><a href="#environment-variables-9">16.2. Environment Variables</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide documents all of the cartridges that are distributed with OpenShift Origin. You can learn about creating your own cartridges by referring to the <a href="oo_cartridge_developers_guide.html">Cartridge Developers Guide</a>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Cartridges and Persistent Storage</strong>: Every time you push, everything in your remote repo directory is recreated.
Store long term items (like an sqlite database) in the OpenShift data directory, which will persist between pushes of your repo.
The OpenShift data directory can be found via the environment variable <code>$OPENSHIFT_DATA_DIR</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="10gen-mms-agent"><a class="anchor" href="#10gen-mms-agent"></a>1. 10gen MMS Agent</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This cartridge provides the <a href="https://www.10gen.com/products/mongodb-monitoring-service">10gen MMS agent</a> on OpenShift.</p>
</div>
<div class="paragraph">
<p>A few necessary steps have to be done, in order to embed the 10gen-mms-agent into your application:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Register at <a href="https://mms.mongodb.com">https://mms.mongodb.com</a></p>
</li>
<li>
<p>Go to the Settings &#8594; Monitoring Agent &#8594; Other Linux</p>
</li>
<li>
<p>Curl tarball link that is there</p>
</li>
<li>
<p>Copy the tarball into the .openshift/mms/ folder and git push it</p>
</li>
<li>
<p>Set environment variable called OPENSHIFT_MMS_API_KEY with the API Key which is in the Settings &#8594; API Settings</p>
<div class="literalblock">
<div class="content">
<pre>rhc set-env OPENSHIFT_MMS_API_KEY=your_mms_api_key -a app</pre>
</div>
</div>
</li>
<li>
<p>Embed the 10gen cartridge.</p>
</li>
<li>
<p>Go to <a href="https://mms.mongodb.com">https://mms.mongodb.com</a> and add your host, by adding MongoDB host, port and credentials into the formular.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cron"><a class="anchor" href="#cron"></a>2. Cron</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This cartridge adds periodic job execution functionality to your OpenShift application.</p>
</div>
<div class="sect2">
<h3 id="installation"><a class="anchor" href="#installation"></a>2.1. Installation</h3>
<div class="paragraph">
<p>To add this cartridge to your application, you can either add it when you create your application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>rhc app create &lt;APP&gt; ruby-1.9 cron</pre>
</div>
</div>
<div class="paragraph">
<p>Or add it to your existing application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>rhc cartridge add cron -a &lt;APP&gt;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-job"><a class="anchor" href="#creating-a-job"></a>2.2. Creating a job</h3>
<div class="paragraph">
<p>The jobs are organized in <code>.openshift/cron</code> directory of your application&#8217;s source. Depending on how often you would like to execute the job, you place them in <code>minutely</code>, <code>hourly</code>, <code>daily</code>, <code>monthly</code>, <code>monthly</code>.</p>
</div>
<div class="paragraph">
<p>The jobs are executed directly. If it is a script, use the "shebang" line to specify the interpreter to execute it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#! /bin/bash
date &gt; $OPENSHIFT_RUBY_LOG_DIR/last_date_cron_ran</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The jobs need to be executable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>chmod +x .openshift/cron/minutely/awesome_job</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="installing-the-job"><a class="anchor" href="#installing-the-job"></a>2.3. Installing the job</h3>
<div class="paragraph">
<p>Once you have created the job, add it to your application repository, commit and push.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>git add .openshift/cron/minutely/awesome_job
git commit -m 'Execute bit set for cron job'
git push</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="execution-timing"><a class="anchor" href="#execution-timing"></a>2.4. Execution timing</h3>
<div class="paragraph">
<p>The jobs are run by the node&#8217;s <code>cron</code> at a specified frequency, however the exact timing is not guaranteed.
If this unpredictability is not desirable, you can instrument your job to inspect the date and/or time when your job runs.</p>
</div>
<div class="paragraph">
<p>For example, the following <code>minutely</code> job would do anything useful only at 12 minutes after the hour.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#!/bin/bash
minute=$(date '+%M')
if [ $minute != 12 ]; then
    exit
fi
# rest of the script</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="see-also"><a class="anchor" href="#see-also"></a>2.5. See also</h3>
<div class="paragraph">
<p><a href="https://www.openshift.com/blogs/getting-started-with-cron-jobs-on-openshift">Getting Started with Cron Jobs on OpenShift</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="diy"><a class="anchor" href="#diy"></a>3. DIY</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>diy</code> cartridge provides a minimal, free-form scaffolding which leaves all details of the cartridge to the application developer.</p>
</div>
<div class="sect2">
<h3 id="get-started"><a class="anchor" href="#get-started"></a>3.1. Get started</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add framework of choice to your repo.</p>
</li>
<li>
<p>Modify <code>.openshift/action_hooks/start</code> to start your application. The application is required to bind to <code>$OPENSHIFT_DIY_IP:$OPENSHIFT_DIY_PORT</code>.</p>
</li>
<li>
<p>Modify <code>.openshift/action_hooks/stop</code> to stop your application.</p>
</li>
<li>
<p>Commit and push your changes.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="repo-layout"><a class="anchor" href="#repo-layout"></a>3.2. Repo layout</h3>
<div class="listingblock">
<div class="content">
<pre>static/           Externally exposed static content goes here
.openshift/
    action_hooks/ See the Action Hooks documentation <i class="conum" data-value="1"></i><b>(1)</b>
        start     Custom action hook used to start your application
        stop      Custom action hook to stop your application</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="oo_user_guide.html#action-hooks">Action Hooks</a> documentation</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
Please leave the <code>static</code> directory in place (alter but do not delete) but feel free to create additional directories if needed.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="environment-variables"><a class="anchor" href="#environment-variables"></a>3.3. Environment Variables</h3>
<div class="paragraph">
<p>The <code>diy</code> cartridge provides the following environment variables to reference for ease of use:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">OPENSHIFT_DIY_IP</dt>
<dd>
<p>The IP address assigned to the application</p>
</dd>
<dt class="hdlist1">OPENSHIFT_DIY_PORT</dt>
<dd>
<p>The port assigned to the the application</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For more information about environment variables, consult the <a href="oo_user_guide.html#environment-variables">Users Guide</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jbossas"><a class="anchor" href="#jbossas"></a>4. JBossAS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Provides the JBossAS application server on OpenShift.</p>
</div>
<div class="sect2">
<h3 id="template-repository-layout"><a class="anchor" href="#template-repository-layout"></a>4.1. Template Repository Layout</h3>
<div class="listingblock">
<div class="content">
<pre>deployments/       Location for built WARs (details below)
src/               Example Maven source structure
pom.xml            Example Maven build file
.openshift/        Location for OpenShift specific files
    config/          location for configuration files such as standalone.xml
    action_hooks/    See the Action Hooks documentation <i class="conum" data-value="1"></i><b>(1)</b>
    markers/         See the Markers section below</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="oo_user_guide.html#action-hooks">Action Hooks</a> documentation</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="layout-and-deployment-options"><a class="anchor" href="#layout-and-deployment-options"></a>4.2. Layout and Deployment Options</h3>
<div class="paragraph">
<p>There are two options for deploying content to the JBoss Application Server within OpenShift. Both options
can be used together (i.e. build one archive from source and others pre-built)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Under most circumstances the .dodeploy file markers should not be added to the deployments directory.
These lifecycle files will be created in the runtime deployments directory (can be seen by SSHing into the application),
but should not be added to the git repo.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Method 1 (Preferred)</strong><br>
You can upload your content in a Maven src structure as is this sample project and on
git push have the application built and deployed.  For this to work you&#8217;ll need your pom.xml at the
root of your repository and a maven-war-plugin like in this sample to move the output from the build
to the deployments directory.  By default the warName is ROOT within pom.xml.  This will cause the
webapp contents to be rendered at <a href="http://app_name-namespace.rhcloud.com/">http://app_name-namespace.rhcloud.com/</a>.  If you change the warName in
pom.xml to app_name, your base url would then become <a href="http://app_name-namespace.rhcloud.com/app_name">http://app_name-namespace.rhcloud.com/app_name</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
If you are building locally you&#8217;ll also want to add any output wars/ears under deployments  from the build to your .gitignore file.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
If you are running scaled AS7 then you need an application deployed to the root context (i.e. <a href="http://app_name-namespace.rhcloud.com/)">http://app_name-namespace.rhcloud.com/)</a> for the HAProxy load-balancer to recognize that the AS7 instance is active.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Method 2</strong><br>
You can git push pre-built wars into <code>deployments/</code>.  To do this with the default repo you&#8217;ll want to first run <code>git rm -r src/ pom.xml</code> from the root of your repo.</p>
</div>
<div class="paragraph">
<p>Basic workflows for deploying pre-built content (each operation will require associated git add/commit/push operations to take effect):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add new zipped content and deploy it: <code>cp target/example.war deployments/</code></p>
</li>
<li>
<p>Add new unzipped/exploded content and deploy it:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>cp -r target/example.war/ deployments/</code></p>
</li>
<li>
<p>edit <code>.openshift/config/standalone.xml</code> and replace</p>
<div class="literalblock">
<div class="content">
<pre>&lt;deployment-scanner path="deployments" relative-to="jboss.server.base.dir" scan-interval="5000" deployment-timeout="300"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>with</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;deployment-scanner path="deployments" relative-to="jboss.server.base.dir" scan-interval="5000" deployment-timeout="300" auto-deploy-exploded="true"/&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Undeploy currently deployed content: <code>git rm deployments/example.war</code></p>
</li>
<li>
<p>Replace currently deployed zipped content with a new version and deploy it: <code>cp target/example.war deployments/</code>
.Replace currently deployed unzipped content with a new version and deploy it:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>git rm -rf deployments/example.war/</code></p>
</li>
<li>
<p><code>cp -r target/example.war/ deployments/</code></p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
You can get the information in the uri above from running <em>rhc domain show</em>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you have already committed large files to your git repo, you rewrite or reset the history of those files in git
to an earlier point in time and then <em>git push --force</em> to apply those changes on the remote OpenShift server.  A
git gc on the remote OpenShift repo can be forced with (Note: tidy also does other cleanup including clearing log
files and tmp dirs):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>rhc app tidy -a appname</pre>
</div>
</div>
<div class="paragraph">
<p>Whether you choose option 1) or 2) the end result will be the application
deployed into the deployments directory. The deployments directory in the
JBoss Application Server distribution is the location end users can place
their deployment content (e.g. war, ear, jar, sar files) to have it
automatically deployed into the server runtime.</p>
</div>
</div>
<div class="sect2">
<h3 id="environment-variables-2"><a class="anchor" href="#environment-variables-2"></a>4.3. Environment Variables</h3>
<div class="paragraph">
<p>The <code>jbossas</code> cartridge provides several environment variables to reference for ease of use:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:50%;">
<col style="width:50%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_JBOSSAS_IP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IP address used to bind JBossAS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_JBOSSAS_HTTP_PORT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The JBossAS listening port</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_JBOSSAS_CLUSTER_PORT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TODO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_JBOSSAS_MESSAGING_PORT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TODO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_JBOSSAS_MESSAGING_THROUGHPUT_PORT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TODO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_JBOSSAS_REMOTING_PORT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TODO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JAVA_OPTS_EXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Appended to JAVA_OPTS prior to invoking the Java VM.</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>For more information about environment variables, consult the <a href="oo_user_guide.html#environment-variables">Users Guide</a></p>
</div>
</div>
<div class="sect2">
<h3 id="markers"><a class="anchor" href="#markers"></a>4.4. Markers</h3>
<div class="paragraph">
<p>Adding marker files to <code>.openshift/markers</code> will have the following effects:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:25%;">
<col style="width:75%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Marker</th>
<th class="tableblock halign-left valign-top">Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable_jpda</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will enable the JPDA socket based transport on the java virtual machine running the JBoss AS 7 application server. This enables you to remotely debug code running inside the JBoss AS 7 application server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">skip_maven_build</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maven build step will be skipped</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">force_clean_build</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will start the build process by removing all non-essential Maven dependencies.  Any current dependencies specified in your pom.xml file will then be re-downloaded.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hot_deploy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will prevent a JBoss container restart during build/deployment. Newly build archives will be re-deployed automatically by the JBoss HDScanner component.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will run JBossAS with Java7 if present. If no marker is present then the baseline Java version will be used (currently Java6)</p></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="jboss-cli"><a class="anchor" href="#jboss-cli"></a>4.5. JBoss CLI</h3>
<div class="paragraph">
<p>The <code>jbossas</code> cartridge provides an OpenShift compatible wrapper of the JBoss CLI tool on the gear <code>PATH</code>, located at
<code>$OPENSHIFT_JBOSSAS_DIR/tools/jboss-cli.sh</code>. Use the following command to connect to the JBoss instance with the
CLI tool:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>jboss-cli.sh -c --controller=${OPENSHIFT_JBOSSAS_IP}:${OPENSHIFT_JBOSSAS_MANAGEMENT_NATIVE_PORT}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jbosseap"><a class="anchor" href="#jbosseap"></a>5. JBossEAP</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Provides the JBossEAP application server on OpenShift.</p>
</div>
<div class="sect2">
<h3 id="template-repository-layout-2"><a class="anchor" href="#template-repository-layout-2"></a>5.1. Template Repository Layout</h3>
<div class="listingblock">
<div class="content">
<pre>    deployments/       Location for built WARs (details below)
    src/               Example Maven source structure
    pom.xml            Example Maven build file
    .openshift/        Location for OpenShift specific files
      config/          location for configuration files such as standalone.xml
      action_hooks/    See the Action Hooks documentation <i class="conum" data-value="1"></i><b>(1)</b>
      markers/         See the Markers section below</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="oo_user_guide.html#action-hooks">Action Hooks</a> documentation</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="layout-and-deployment-options-2"><a class="anchor" href="#layout-and-deployment-options-2"></a>5.2. Layout and Deployment Options</h3>
<div class="paragraph">
<p>There are two options for deploying content to the JBoss Application Server within OpenShift. Both options
can be used together (i.e. build one archive from source and others pre-built)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Under most circumstances the .dodeploy file markers should not be added to the deployments directory.
These lifecycle files will be created in the runtime deployments directory (can be seen by SSHing into the application),
but should not be added to the git repo.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Method 1 (Preferred)</strong><br>
You can upload your content in a Maven src structure as is this sample project and on
git push have the application built and deployed.  For this to work you&#8217;ll need your pom.xml at the
root of your repository and a maven-war-plugin like in this sample to move the output from the build
to the deployments directory.  By default the warName is ROOT within pom.xml.  This will cause the
webapp contents to be rendered at <a href="http://app_name-namespace.rhcloud.com/">http://app_name-namespace.rhcloud.com/</a>.  If you change the warName in
pom.xml to app_name, your base url would then become <a href="http://app_name-namespace.rhcloud.com/app_name">http://app_name-namespace.rhcloud.com/app_name</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
If you are building locally you&#8217;ll also want to add any output wars/ears under deployments from the build to your .gitignore file.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
If you are running scaled EAP6.0 then you need an application deployed to the root context (i.e. <a href="http://app_name-namespace.rhcloud.com/)">http://app_name-namespace.rhcloud.com/)</a> for the HAProxy load-balancer to recognize that the EAP6.0 instance  is active.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Method 2</strong><br>
You can git push pre-built wars into <code>deployments/</code>. To do this with the default repo you&#8217;ll want to first run <code>git rm -r src/ pom.xml</code> from the root of your repo.</p>
</div>
<div class="paragraph">
<p>Basic workflows for deploying pre-built content (each operation will require associated git add/commit/push operations to take effect):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add new zipped content and deploy it: <code>cp target/example.war deployments/</code></p>
</li>
<li>
<p>Add new unzipped/exploded content and deploy it:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>cp -r target/example.war/ deployments/</p>
</li>
<li>
<p>edit .openshift/config/standalone.xml and replace</p>
<div class="literalblock">
<div class="content">
<pre>&lt;deployment-scanner path="deployments" relative-to="jboss.server.base.dir" scan-interval="5000" deployment-timeout="300"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>with</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;deployment-scanner path="deployments" relative-to="jboss.server.base.dir" scan-interval="5000" deployment-timeout="300" auto-deploy-exploded="true"/&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Undeploy currently deployed content: <code>git rm deployments/example.war</code></p>
</li>
<li>
<p>Replace currently deployed zipped content with a new version and deploy it: <code>cp target/example.war deployments/</code></p>
</li>
<li>
<p>Replace currently deployed unzipped content with a new version and deploy it:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>git rm -rf deployments/example.war/</p>
</li>
<li>
<p>cp -r target/example.war/ deployments/</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
You can get the information in the uri above from running <em>rhc domain show</em>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you have already committed large files to your git repo, you rewrite or reset the history of those files in git
to an earlier point in time and then <em>git push --force</em> to apply those changes on the remote OpenShift server.  A
git gc on the remote OpenShift repo can be forced with (Note: tidy also does other cleanup including clearing log
files and tmp dirs):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>rhc app tidy -a appname</pre>
</div>
</div>
<div class="paragraph">
<p>Whether you choose option 1) or 2) the end result will be the application
deployed into the deployments directory. The deployments directory in the
JBoss Application Server distribution is the location end users can place
their deployment content (e.g. war, ear, jar, sar files) to have it
automatically deployed into the server runtime.</p>
</div>
</div>
<div class="sect2">
<h3 id="environment-variables-3"><a class="anchor" href="#environment-variables-3"></a>5.3. Environment Variables</h3>
<div class="paragraph">
<p>The <code>jbosseap</code> cartridge provides several environment variables to reference for ease
of use:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:50%;">
<col style="width:50%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_JBOSSEAP_IP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IP address used to bind JBossAS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_JBOSSEAP_HTTP_PORT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The JBossAS listening port</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_JBOSSEAP_CLUSTER_PORT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TODO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_JBOSSEAP_MESSAGING_PORT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TODO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_JBOSSEAP_MESSAGING_THROUGHPUT_PORT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TODO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_JBOSSEAP_REMOTING_PORT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TODO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JAVA_OPTS_EXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Appended to JAVA_OPTS prior to invoking the Java VM.</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>For more information about environment variables, consult the <a href="oo_user_guide.html#environment-variables">Users Guide</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="markers-2"><a class="anchor" href="#markers-2"></a>5.4. Markers</h3>
<div class="paragraph">
<p>Adding marker files to <code>.openshift/markers</code> will have the following effects:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:25%;">
<col style="width:75%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Marker</th>
<th class="tableblock halign-left valign-top">Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable_jpda</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will enable the JPDA socket based transport on the java virtual machine running the JBoss AS 7 application server. This enables you to remotely debug code running inside the JBoss AS 7 application server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">skip_maven_build</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maven build step will be skipped</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">force_clean_build</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will start the build process by removing all non-essential Maven dependencies.  Any current dependencies specified in your pom.xml file will then be re-downloaded.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hot_deploy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will prevent a JBoss container restart during build/deployment. Newly build archives will be re-deployed automatically by the JBoss HDScanner component.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will run JBossEAP with Java7 if present. If no marker is present then the baseline Java version will be used (currently Java6)</p></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="jboss-cli-2"><a class="anchor" href="#jboss-cli-2"></a>5.5. JBoss CLI</h3>
<div class="paragraph">
<p>The <code>jbosseap</code> cartridge provides an OpenShift compatible wrapper of the JBoss CLI tool on the gear <code>PATH</code>, located at
<code>$OPENSHIFT_JBOSSEAP_DIR/tools/jboss-cli.sh</code>. Use the following command to connect to the JBoss instance with the
CLI tool:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>jboss-cli.sh -c --controller=${OPENSHIFT_JBOSSEAP_IP}:${OPENSHIFT_JBOSSEAP_MANAGEMENT_NATIVE_PORT}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tomcat"><a class="anchor" href="#tomcat"></a>6. Tomcat (JBossEWS)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>jbossews</code> cartridge provides Tomcat on OpenShift via the JBoss EWS package. This cartridge has special functionality to enable integration with OpenShift and with other cartridges. See the <a href="#tomcat-cartridge-integrations">Cartridge Integrations</a> and
<a href="#tomcat-environment-variable-replacement-support">Environment Variable Replacement Support</a> sections for details.</p>
</div>
<div class="sect2">
<h3 id="template-repository-layout-3"><a class="anchor" href="#template-repository-layout-3"></a>6.1. Template Repository Layout</h3>
<div class="listingblock">
<div class="content">
<pre>webapps/           Location for built WARs (details below)
src/               Example Maven source structure
pom.xml            Example Maven build file
.openshift/        Location for OpenShift specific files
    config/          Location for configuration files such as server.xml
    action_hooks/    See the Action Hooks documentation <i class="conum" data-value="1"></i><b>(1)</b>
    markers/         See the Markers section below</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="oo_user_guide.html#action-hooks">Action Hooks</a> documentation</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="layout-and-deployment-options-3"><a class="anchor" href="#layout-and-deployment-options-3"></a>6.2. Layout and Deployment Options</h3>
<div class="paragraph">
<p>There are two options for deploying content to the Tomcat Server within OpenShift. Both options
can be used together (i.e. build one archive from source and others pre-built)</p>
</div>
<div class="paragraph">
<p><strong>Method 1 (Preferred)</strong><br>
You can upload your content in a Maven src structure as is this sample project and on
Git push have the application built and deployed.  For this to work you&#8217;ll need your pom.xml at the
root of your repository and a maven-war-plugin like in this sample to move the output from the build
to the webapps directory.  By default the warName is ROOT within pom.xml.  This will cause the
webapp contents to be rendered at <code>http://app_name-namespace.rhcloud.com/</code>.  If you change the warName in
<code>pom.xml</code> to app_name, your base url would then become <code>http://app_name-namespace.rhcloud.com/app_name</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
If you are building locally you&#8217;ll also want to add any output wars under webapps from the build to your <code>.gitignore</code> file.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
If you are running scaled EWS then you need an application deployed to the root context (i.e. <a href="http://app_name-namespace.rhcloud.com/)">http://app_name-namespace.rhcloud.com/)</a> for the HAProxy load-balancer to recognize that the EWS instance is active.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Method 2</strong><br>
You can commit pre-built wars into <code>webapps</code>. To do this with the default repo, first run <code>git rm -r src/ pom.xml</code> from the root of your repo.</p>
</div>
<div class="paragraph">
<p>Basic workflows for deploying pre-built content (each operation will require associated Git add/commit/push operations to take effect):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add new zipped content and deploy it: <code>cp target/example.war webapps/</code></p>
</li>
<li>
<p>Undeploy currently deployed content: <code>git rm webapps/example.war</code></p>
</li>
<li>
<p>Replace currently deployed zipped content with a new version and deploy it: <code>cp target/example.war webapps/</code></p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
You can get the information in the uri above from running <code>rhc domain show</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you have already committed large files to your Git repo, you rewrite or reset the history of those files in Git
to an earlier point in time and then <code>git push --force</code> to apply those changes on the remote OpenShift server.  A
<code>git gc</code> on the remote OpenShift repo can be forced with (Note: tidy also does other cleanup including clearing log
files and tmp dirs):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>rhc app tidy -a appname</pre>
</div>
</div>
<div class="paragraph">
<p>Whether you choose option 1) or 2) the end result will be the application
deployed into the <code>webapps</code> directory. The <code>webapps</code> directory in the
Tomcat distribution is the location end users can place
their deployment content (e.g. war, ear, jar, sar files) to have it
automatically deployed into the server runtime.</p>
</div>
</div>
<div class="sect2">
<h3 id="environment-variables-4"><a class="anchor" href="#environment-variables-4"></a>6.3. Environment Variables</h3>
<div class="paragraph">
<p>The Tomcat cartridge provides several environment variables to reference for ease of use:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">OPENSHIFT_JBOSSEWS_IP</dt>
<dd>
<p>The IP address used to bind EWS</p>
</dd>
<dt class="hdlist1">OPENSHIFT_JBOSSEWS_HTTP_PORT</dt>
<dd>
<p>The EWS listening port</p>
</dd>
<dt class="hdlist1">OPENSHIFT_JBOSSEWS_JPDA_PORT</dt>
<dd>
<p>The EWS JPDA listening port</p>
</dd>
<dt class="hdlist1">JAVA_OPTS_EXT</dt>
<dd>
<p>Appended to JAVA_OPTS prior to invoking the Java VM.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For more information about environment variables, consult the <a href="oo_user_guide.html#environment-variables">Users Guide</a>.</p>
</div>
<div id="tomcat-environment-variable-replacement-support" class="sidebarblock">
<div class="content">
<div class="title">Environment Variable Replacement Support</div>
<div class="paragraph">
<p>The <code>jbossews</code> cart provides special environment variable replacement functionality for some of the Tomcat configuration files. For the following configuration files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>.openshift/config/server.xml</code></p>
</li>
<li>
<p><code>.openshift/config/context.xml</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ant-style environment replacements are supported for all <code>OPENSHIFT_</code>-prefixed environment variables in the application. For example, the following replacements are valid in <code>server.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;Connector address="${OPENSHIFT_JBOSSEWS_IP}"
           port="${OPENSHIFT_JBOSSEWS_HTTP_PORT}"
           protocol="HTTP/1.1"
           connectionTimeout="20000"
           redirectPort="8443" /&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>During server startup, the configuration files in the source repository are processed to replace <code>OPENSHIFT_*</code> values, and the resulting processed file is copied to the live Tomcat configuration directory.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tomcat-cartridge-integrations"><a class="anchor" href="#tomcat-cartridge-integrations"></a>6.4. Cartridge Integrations</h3>
<div class="paragraph">
<p>The <code>jbossews</code> cart has out-of-the-box integration support with the RedHat <code>postgresql</code> and <code>mysql</code> cartridges. The default
<code>context.xml</code> contains two basic JDBC <code>Resource</code> definitions, <code>jdbc/MySQLDS</code> and <code>jdbc/PostgreSQLDS</code>, which will be automatically
configured to work with their respective cartridges if installed into your application.</p>
</div>
</div>
<div class="sect2">
<h3 id="markers-3"><a class="anchor" href="#markers-3"></a>6.5. Markers</h3>
<div class="paragraph">
<p>Adding marker files to <code>.openshift/markers</code> will have the following effects:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:25%;">
<col style="width:75%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Marker</th>
<th class="tableblock halign-left valign-top">Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable_jpda</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will enable the JPDA socket based transport on the java virtual machine running the Tomcat server. This enables you to remotely debug code running inside Tomcat.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">skip_maven_build</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maven build step will be skipped</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">force_clean_build</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will start the build process by removing all non-essential Maven dependencies.  Any current dependencies specified in your pom.xml file will then be re-downloaded.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hot_deploy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will prevent a JBoss container restart during build/deployment. Newly build archives will be re-deployed automatically by the JBoss HDScanner component.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will run Tomcat with Java7 if present. If no marker is present then the baseline Java version will be used (currently Java6)</p></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="sect1">
<h2 id="jenkins"><a class="anchor" href="#jenkins"></a>7. Jenkins</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>jenkins</code> cartridge provides the Jenkins continuous integration server on OpenShift.</p>
</div>
<div class="sect2">
<h3 id="template-repository-layout-4"><a class="anchor" href="#template-repository-layout-4"></a>7.1. Template Repository Layout</h3>
<div class="listingblock">
<div class="content">
<pre>    .openshift/        Location for OpenShift specific files
      action_hooks/    See the Action Hooks documentation <i class="conum" data-value="1"></i><b>(1)</b>
      markers/         See the Markers section below</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="oo_user_guide.html#action-hooks">Action Hooks</a> documentation</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="quickstart"><a class="anchor" href="#quickstart"></a>7.2. Quickstart</h3>
<div class="paragraph">
<p>Jenkins integrates with other OpenShift applications.  To use start building against Jenkins, embed the <code>jenkins-client</code> into an existing application. The below example will cause app <code>myapp</code> to start building against Jenkins.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ rhc cartridge add -a myapp -c jenkins-client-1</pre>
</div>
</div>
<div class="paragraph">
<p>From then on, running a <code>git push</code> will cause the build process to happen inside a Jenkins builder instead of inside your normal application compute space.</p>
</div>
<div class="paragraph">
<p>Benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Archived build information</p>
</li>
<li>
<p>No application downtime during the build process</p>
</li>
<li>
<p>Failed builds do not get deployed (leaving the previous working version in place).</p>
</li>
<li>
<p>Jenkins builders have additional resources like memory and storage</p>
</li>
<li>
<p>A large community of Jenkins plugins</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="building-with-jenkins"><a class="anchor" href="#building-with-jenkins"></a>7.3. Building with Jenkins</h3>
<div class="paragraph">
<p>Building with Jenkins uses dedicated application space that can be larger
then the application runtime space.  Because the build happens in its own
dedicated jail, the running application is not shutdown or changed in any way
until after the build is a success.  If it is not, the current active running
application will continue to run.  However, a failure in the deploy process may
still leave the app partially deployed or inaccessible.  During a build the
following steps take place:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User issues a git push</p>
</li>
<li>
<p>Jenkins is notified a new push is ready.</p>
</li>
<li>
<p>A dedicated Jenkins slave (builder) is created.  It can be seen by using the <code>rhc domain show</code> command. The app name will be the same as the originating app plus "bldr" tagged onto the end.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
This requires the first 28 chars of app name be unique or builders will be shared (can cause issues).
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Jenkins runs the build</p>
</li>
<li>
<p>Content from originating app is downloaded to the builder app through git and rsync (Git for source code and rsync for existing libraries).</p>
</li>
<li>
<p>The cartridge-specific build Shell Task is executed.</p>
</li>
<li>
<p>Jenkins archives build artifacts for later reference</p>
</li>
<li>
<p>After 15 minutes of idle time, the <code>build app</code> will be deleted and will no longer show up with the <code>rhc domain show</code> command.  The build artifacts however, will still exist in Jenkins and can be viewed there.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Users can look at the build job by clicking on it in the Jenkins interface and
going to "configure".  It is the Jenkins' build job to stop, sync and start the
application once a build is complete.</p>
</div>
<div class="paragraph">
<p>For a detailed overview of the OpenShift build/deploy process, consult the <a href="oo_cartridge_developers_guide.html#openshift-builds">OpenShift Builds</a> documentation.</p>
</div>
</div>
<div class="sect2">
<h3 id="markers-4"><a class="anchor" href="#markers-4"></a>7.4. Markers</h3>
<div class="paragraph">
<p>Adding marker files to <code>.openshift/markers</code> will have the following effects:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:25%;">
<col style="width:75%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Marker</th>
<th class="tableblock halign-left valign-top">Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable_debugging</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <em>Debugging Jenkins</em> below</p></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="debugging-jenkins"><a class="anchor" href="#debugging-jenkins"></a>7.5. Debugging Jenkins</h3>
<div class="paragraph">
<p>The Jenkins server can be configured to accept remote debugger connections. To enable
debugging, create a file <code>.openshift/markers/enable_debugging</code> in the Jenkins app
Git repository and restart Jenkins. The debug server will listen on port <code>7600</code> for
connections.</p>
</div>
<div class="paragraph">
<p>Use SSH port forwarding to start a remote debugging session on the server.
The <code>rhc</code> command is helpful for this. For example, in a sample Jenkins application
named <code>jenkins</code> containing the <code>enable_debugging</code> marker, the following command
will automatically enable SSH port forwarding:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    $ rhc port-forward -a jenkins
    Checking available ports...
    Forwarding ports
      Service Connect to            Forward to
      ==== ================ ==== ================
      java 127.0.251.1:7600  =&gt;  127.0.251.1:7600
      java 127.0.251.1:8080  =&gt;  127.0.251.1:8080
    Press CTRL-C to terminate port forwarding</pre>
</div>
</div>
<div class="paragraph">
<p>The local debugger can now be attached to <code>127.0.251.1:7600</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jenkins-client"><a class="anchor" href="#jenkins-client"></a>8. Jenkins Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>jenkins-client</code> cartridge works with the <a href="#jenkins">Jenkins Cartridge</a> to provide Jenkins integration for OpenShift applications. Consult the <a href="#jenkins">Jenkins</a> cartridge documentation for more information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mariadb"><a class="anchor" href="#mariadb"></a>9. MariaDB</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>mariadb</code> cartridge provides <a href="http://mariadb.org/">MariaDB</a> on OpenShift.</p>
</div>
<div class="sect2">
<h3 id="environment-variables-5"><a class="anchor" href="#environment-variables-5"></a>9.1. Environment Variables</h3>
<div class="paragraph">
<p>The <code>mariadb</code> cartridge provides several environment variables to reference for ease of use:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">OPENSHIFT_MARIADB_DB_HOST</dt>
<dd>
<p>The MySQL IP address</p>
</dd>
<dt class="hdlist1">OPENSHIFT_MARIADB_DB_PORT</dt>
<dd>
<p>The MySQL port</p>
</dd>
<dt class="hdlist1">OPENSHIFT_MARIADB_DB_LOG_DIR</dt>
<dd>
<p>The path to the MySQL log directory</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mongodb"><a class="anchor" href="#mongodb"></a>10. MongoDB</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>mongodb</code> cartridge provides <a href="http://www.mongodb.org/">MongoDB</a> on OpenShift.</p>
</div>
<div class="sect2">
<h3 id="environment-variables-6"><a class="anchor" href="#environment-variables-6"></a>10.1. Environment Variables</h3>
<div class="paragraph">
<p>The <code>mongodb</code> cartridge provides several environment variables to reference for ease of use:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">OPENSHIFT_MONGODB_DB_HOST</dt>
<dd>
<p>The MongoDB IP address</p>
</dd>
<dt class="hdlist1">OPENSHIFT_MONGODB_DB_PORT</dt>
<dd>
<p>The MongoDB port</p>
</dd>
<dt class="hdlist1">OPENSHIFT_MONGODB_DB_LOG_DIR</dt>
<dd>
<p>The path to the MongoDB log directory</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mysql"><a class="anchor" href="#mysql"></a>11. MySQL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>mysql</code> cartridge provides [MySQL](<a href="http://www.mysql.com/">http://www.mysql.com/</a>) on OpenShift.</p>
</div>
<div class="sect2">
<h3 id="environment-variables-7"><a class="anchor" href="#environment-variables-7"></a>11.1. Environment Variables</h3>
<div class="paragraph">
<p>The <code>mysql</code> cartridge provides several environment variables to reference for ease of use:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">OPENSHIFT_MYSQLDB_DB_HOST</dt>
<dd>
<p>The MySQL IP address</p>
</dd>
<dt class="hdlist1">OPENSHIFT_MYSQLDB_DB_PORT</dt>
<dd>
<p>The MySQL port</p>
</dd>
<dt class="hdlist1">OPENSHIFT_MYSQLDB_DB_LOG_DIR</dt>
<dd>
<p>The path to the MySQL log directory
OPENSHIFT_MYSQL_VERSION: The version of the MySQL server
OPENSHIFT_MYSQL_TIMEZONE: The MySQL server timezone
OPENSHIFT_MYSQL_LOWER_CASE_TABLE_NAMES: Sets how the table names are stored and compared
OPENSHIFT_MYSQL_DEFAULT_STORAGE_ENGINE: The default storage engine (table type)
OPENSHIFT_MYSQL_MAX_CONNECTIONS: The maximum permitted number of simultaneous client connections
OPENSHIFT_MYSQL_FT_MIN_WORD_LEN: The minimum length of the word to be included in a FULLTEXT index.
OPENSHIFT_MYSQL_FT_MAX_WORD_LEN: The maximum length of the word to be included in a FULLTEXT index.</p>
</dd>
<dt class="hdlist1">OPENSHIFT_MYSQL_AIO</dt>
<dd>
<p>Controls the <em>innodb_use_native_aio</em> setting value in case the native AIO is broken. See <a href="http://help.directadmin.com/item.php?id=529">http://help.directadmin.com/item.php?id=529</a></p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nodejs"><a class="anchor" href="#nodejs"></a>12. NodeJS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>nodejs</code> cartridge provides <a href="http://nodejs.org/">Node.JS</a> on OpenShift.</p>
</div>
<div class="paragraph">
<p>The cartridge provides a short list of Node.js modules by default. The list is available in <code>$OPENSHIFT_NODEJS_DIR/versions/0.6/configuration/npm_global_module_list</code>.
You can also see the file <code>versions/0.6/configuration/npm_global_module_list</code> under this directory.</p>
</div>
<div class="sect2">
<h3 id="template-repository-layout-5"><a class="anchor" href="#template-repository-layout-5"></a>12.1. Template Repository Layout</h3>
<div class="listingblock">
<div class="content">
<pre>node_modules/            Any Node modules packaged with the app <i class="conum" data-value="1"></i><b>(1)</b>
deplist.txt              Deprecated.
package.json             npm package descriptor.
.openshift/              Location for OpenShift specific files
    action_hooks/        See the Action Hooks documentation <i class="conum" data-value="2"></i><b>(2)</b>
    markers/             See the Markers section below</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>See <a href="#nodejs-node_modules-directory"><code>node_modules</code></a></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><a href="oo_user_guide.html#action-hooks">Action Hooks</a> documentation</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="layout-notes"><a class="anchor" href="#layout-notes"></a>12.1.1. Layout Notes</h4>
<div class="paragraph">
<p>Please leave the <code>node_modules</code> and <code>.openshift</code> directories but feel free to
create additional directories if needed.</p>
</div>
</div>
<div class="sect3">
<h4 id="nodejs-node_modules-directory"><a class="anchor" href="#nodejs-node_modules-directory"></a>12.1.2. <code>node_modules</code> directory</h4>
<div class="paragraph">
<p>The <code>node_modules</code> directory allows you to package any Node module on which your application depends along with your application.</p>
</div>
<div class="paragraph">
<p>If you just wish to install module(s) from the npm registry (<a href="https://npmjs.org/">npmjs.org</a>), you can specify the module name(s) and versions in your application&#8217;s <code>package.json</code> file.</p>
</div>
</div>
<div class="sect3">
<h4 id="deplist-txt"><a class="anchor" href="#deplist-txt"></a>12.1.3. deplist.txt</h4>
<div class="paragraph">
<p>This functionality has been deprecated and will soon go away. <code>package.json</code> is the preferred method to add dependencies.</p>
</div>
</div>
<div class="sect3">
<h4 id="package-json"><a class="anchor" href="#package-json"></a>12.1.4. package.json</h4>
<div class="paragraph">
<p>npm package descriptor - run <code>npm help json</code> for more details.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Among other things, this file contains a list of dependencies
(node modules) to install alongside your application and is processed
every time you <code>git push</code> to your OpenShift application.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="environment-variables-8"><a class="anchor" href="#environment-variables-8"></a>12.2. Environment Variables</h3>
<div class="paragraph">
<p>The Node.JS cartridge provides several environment variables to reference for ease of use:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">OPENSHIFT_NODEJS_IP</dt>
<dd>
<p>The IP address used to bind Node.js</p>
</dd>
<dt class="hdlist1">OPENSHIFT_NODEJS_PORT</dt>
<dd>
<p>The Node.js listening port</p>
</dd>
<dt class="hdlist1">OPENSHIFT_NODEJS_POLL_INTERVAL</dt>
<dd>
<p>May be set as a user environment variable to change the default of 1s</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="markers-5"><a class="anchor" href="#markers-5"></a>12.3. Markers</h3>
<div class="paragraph">
<p>Adding marker files to <code>.openshift/markers</code> will have the following effects:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:25%;">
<col style="width:75%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Marker</th>
<th class="tableblock halign-left valign-top">Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hot_deploy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable app restarting during git pushes (see <em>Development Mode</em>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">use_npm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This will force to run your application using NPM instead of using <em>supervisor</em></p></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="development-mode"><a class="anchor" href="#development-mode"></a>12.4. Development Mode</h3>
<div class="paragraph">
<p>When you push your code changes to OpenShift, if you want dynamic reloading
of your javascript files in "development" mode, you can either use the
<code>hot_deploy</code> marker or add the following to <code>package.json</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="json language-json"><span style="color:#606"><span style="color:#404">&quot;</span><span>scripts</span><span style="color:#404">&quot;</span></span>: { <span style="color:#606"><span style="color:#404">&quot;</span><span>start</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">supervisor &lt;relative-path-from-repo-to&gt;/server.js</span><span style="color:#710">&quot;</span></span> },</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will run Node.JS with <a href="https://npmjs.org/package/supervisor">Supervisor</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>hot_deploy</code> marker is restricted to the supervisor only. Using the
<code>use_npm</code> marker, your application will always do a full restart.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="local-development-testing"><a class="anchor" href="#local-development-testing"></a>12.5. Local Development + Testing</h3>
<div class="paragraph">
<p>You can also develop and test your Node application locally on your machine
(workstation). In order to do this, you will need to perform some
basic setup - install Node + the npm modules that OpenShift has globally
installed:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Collect some information about the environment on OpenShift.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Get Node.js version information:</p>
<div class="literalblock">
<div class="content">
<pre>$ ssh $uuid@$appdns node -v</pre>
</div>
</div>
</li>
<li>
<p>Get list of globally install npm modules</p>
<div class="literalblock">
<div class="content">
<pre>$ ssh $uuid@$appdns npm list -g</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Ensure that an appropriate version of Node is installed locally. This depends on your application. Using the same version would be preferable in most cases but your mileage may vary with newer versions.</p>
</li>
<li>
<p>Install the versions of the Node modules you got in step 1.a. Use -g if you want to install them globally, the better alternative though is to install them in the home directory of the currently logged user on your local machine/workstation.</p>
<div class="literalblock">
<div class="content">
<pre># pushd ~
# npm install [-g] $module_name@$version
# popd</pre>
</div>
</div>
</li>
<li>
<p>Once you have completed the above setup, you can then run your application locally by using any one of these commands:</p>
<div class="literalblock">
<div class="content">
<pre>node server.js
npm start -d
supervisor server.js</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>And then iterate on developing+testing your application.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="perl"><a class="anchor" href="#perl"></a>13. Perl</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>perl</code> cartridge provides <a href="http://www.perl.org/">Perl</a> on OpenShift.</p>
</div>
<div class="sect2">
<h3 id="template-repository-layout-6"><a class="anchor" href="#template-repository-layout-6"></a>13.1. Template Repository Layout</h3>
<div class="listingblock">
<div class="content">
<pre>index.pl
.openshift/           Location for OpenShift specific files
    action_hooks/     See the Action Hooks documentation <i class="conum" data-value="1"></i><b>(1)</b>
    markers/          See the Markers section below
    cpan.txt          List of modules to install</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="oo_user_guide.html#action-hooks">Action Hooks</a> documentation</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Due to changes in Perl cartridge template layout, the application root is now stored in <code>$OPENSHIFT_REPO_DIR</code>, but is also backward compatible with deprecated <code>perl/</code> directory.</p>
</div>
<div class="paragraph">
<p>Modules are installed with <code>cpan.txt</code>, located in the <code>.openshift/</code> directory. In addition, application dependencies can be installed using cpanfile or Makefile.PL placed in the .openshift/ folder. deplist.txt is deprecated in favor of .openshift/cpan.txt.</p>
</div>
</div>
<div class="sect2">
<h3 id="cartridge-layout"><a class="anchor" href="#cartridge-layout"></a>13.2. Cartridge Layout</h3>
<div class="listingblock">
<div class="content">
<pre>run/                  Various run configs (like httpd pid)
usr/                  Perl example application template
env/                  Environment variables
logs/                 Log data (like httpd access/error logs)
lib/                  Various libraries
bin/setup             The script to setup the cartridge
bin/build             Default build script
bin/teardown          Called at cartridge destruction
bin/control           Init script to start/stop httpd
versions/             Version data to support multiple perl versions (copied into place by setup)</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="markers-6"><a class="anchor" href="#markers-6"></a>13.3. Markers</h3>
<div class="paragraph">
<p>Adding marker files to <code>.openshift/markers</code> will have the following effects:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:25%;">
<col style="width:75%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Marker</th>
<th class="tableblock halign-left valign-top">Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">force_clean_build</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will remove all previous perl deps and start installing required deps from scratch</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable_cpan_tests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will install all the cpan packages and run their tests</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hot_deploy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will prevent the apache process from being restarted during build/deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">disable_auto_scaling</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will prevent scalable applications from scaling up or down according to application load.</p></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="sect1">
<h2 id="php"><a class="anchor" href="#php"></a>14. PHP</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>php</code> cartridge provides <a href="http://www.php.net">PHP</a> on OpenShift.</p>
</div>
<div class="sect2">
<h3 id="template-repository-layout-7"><a class="anchor" href="#template-repository-layout-7"></a>14.1. Template Repository Layout</h3>
<div class="listingblock">
<div class="content">
<pre>index.php              Template PHP index page
.openshift/            Location for OpenShift specific files
    action_hooks/      See the Action Hooks documentation <i class="conum" data-value="1"></i><b>(1)</b>
    markers/           See the Markers section below
    pear.txt           List of pears to install <i class="conum" data-value="2"></i><b>(2)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="oo_user_guide.html#action-hooks">Action Hooks</a> documentation</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A list of pears to install, line by line on the server. This will happen when the user git pushes.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="document-root"><a class="anchor" href="#document-root"></a>14.2. Document root</h3>
<div class="paragraph">
<p><a href="http://httpd.apache.org/docs/current/mod/core.html#documentroot">Apache DocumentRoot</a>,
the directory that forms the main document tree visible from the web, is selected based
on the existence of a common directory in the repository code in the following order:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>1. php/          # for backward compatibility with OpenShift Origin v1/v2
2. public/       # Zend Framework v1/v2, Laravel, FuelPHP, Surebert etc.
3. public_html/  # Apache per-user web directories, Slim Framework etc.
4. web/          # Symfony etc.
5. www/          # Nette etc.
6. ./            # Drupal, Wordpress, CakePHP, CodeIgniter, Joomla, Kohana, PIP etc.</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="php-include_path"><a class="anchor" href="#php-include_path"></a>14.3. PHP include_path</h3>
<div class="paragraph">
<p>The following application directories, that might exist in the repository code, are added
to the <a href="http://php.net/manual/en/ini.core.php#ini.include-path">PHP include_path</a> and thus
automatically searched when calling require(), include() and other file I/O functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>- lib/
- libs/
- libraries/
- src/
- misc/
- vendor/
- vendors/</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="markers-7"><a class="anchor" href="#markers-7"></a>14.4. Markers</h3>
<div class="paragraph">
<p>Adding marker files to <code>.openshift/markers</code> will have the following effects:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:25%;">
<col style="width:75%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Marker</th>
<th class="tableblock halign-left valign-top">Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">force_clean_build</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will remove all previous deps and start installing required deps from scratch</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hot_deploy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will prevent the apache process from being restarted during build/deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">disable_auto_scaling</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will prevent scalable applications from scaling up or down according to application load.</p></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="sect1">
<h2 id="phpmyadmin"><a class="anchor" href="#phpmyadmin"></a>15. phpMyAdmin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>phpmyadmin</code> cartridge provides <a href="http://www.phpmyadmin.net">phpMyAdmin</a> on OpenShift. In order to add this cartridge to an application, the <a href="#mysql">MySQL</a> cartridge must already be present. Once installed, phpMyAdmin can be used by navigating to http://<em>app</em>-<em>domain</em>.rhcloud.com/phpmyadmin with the MySQL login credentials.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="postgresql"><a class="anchor" href="#postgresql"></a>16. PostgreSQL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>postgresql</code> cartridge provides <a href="http://www.postgresql.com/">PostgreSQL</a> on OpenShift.</p>
</div>
<div class="sect2">
<h3 id="template-repository-layout-8"><a class="anchor" href="#template-repository-layout-8"></a>16.1. Template Repository Layout</h3>
<div class="listingblock">
<div class="content">
<pre>sql/     SQL data or scripts.</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
Please leave <code>sql</code> and <code>data</code> directories but feel free to create additional directories if needed.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="environment-variables-9"><a class="anchor" href="#environment-variables-9"></a>16.2. Environment Variables</h3>
<div class="paragraph">
<p>The <code>postgresql</code> cartridge provides several environment variables to reference for ease of use:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:50%;">
<col style="width:50%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_POSTGRESQL_DB_HOST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Numeric host address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_POSTGRESQL_DB_PORT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_POSTGRESQL_DB_USERNAME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DB Username</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_POSTGRESQL_DB_PASSWORD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DB Password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_POSTGRESQL_DB_LOG_DIR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory for log files</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_POSTGRESQL_DB_PID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PID of current Postgres server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_POSTGRESQL_DB_SOCKET_DIR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Postgres socket location</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_POSTGRESQL_DB_URL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full server URL of the form "postgresql://user:password@host:port"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_POSTGRESQL_VERSION</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PostgreSQL version in the form <code>X.Y</code></p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>You can fine-tune the PostgreSQL server performance by using the rhc tool and
changing the default values for these variables:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:50%;">
<col style="width:50%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_POSTGRESQL_SHARED_BUFFERS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The shared_buffers configuration parameter determines how much memory is dedicated to PostgreSQL to use for caching data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPENSHIFT_POSTGRESQL_MAX_CONNECTIONS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">max_connections sets exactly that: the maximum number of client connections allowed.
</p><p class="tableblock">For more details, please refer to PostgreSQL
<a href="https://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server">wiki page</a>.
</p><p class="tableblock"></p><p class="tableblock"><a id="python"></a>
== Python
The <code>python</code> cartridge provides <a href="http://www.python.org/">Python</a> on OpenShift.
</p><p class="tableblock">=== Template Repository Layout
----
wsgi.py                Default WSGI entry-point &lt;1&gt;
setup.py               Standard Setup Script &lt;2&gt;
requirements.txt       Standard pip requirements file &lt;3&gt;
.openshift/            Location for OpenShift specific files
    action_hooks/      See the Action Hooks documentation &lt;4&gt;
    markers/           See the Markers section below
----
&lt;1&gt; For backward compatibility, the <code>wsgi/application</code> path is selected as default
    WSGI entry-point with higher priority. You can customize the path using the
    <code>OPENSHIFT_PYTHON_WSGI_APPLICATION</code> envirotnment variable. See the Environment
    variables section below.
&lt;2&gt; Adding dependencies to the <code>install_requires</code> section of <code>setup.py</code> file will
    cause the cartridge to install those dependencies at git push time.
&lt;3&gt; Adding dependencies to this file will cause the cartridge to run
    <code>pip install -r requirements.txt</code> command at git push time. You can customize
    the path using the <code>OPENSHIFT_PYTHON_REQUIREMENTS_PATH</code> variable. See the
    Environment variables section below.
&lt;4&gt; <a href="oo_user_guide.html#action-hooks">Action Hooks</a> documentation
</p><p class="tableblock">=== Cartridge Layout
----
run/           Various run configs (like httpd pid)
env/           Environment variables
logs/          Log data (like httpd access/error logs)
lib/           Various libraries
bin/setup      The script to setup the cartridge
bin/build      Default build script
bin/teardown   Called at cartridge descruction
bin/control    Init script to start/stop httpd
versions/      Version data to support multiple python versions (copied into place by setup
----
</p><p class="tableblock">=== Markers
Adding marker files to <code>.openshift/markers</code> will have the following effects:
</p><p class="tableblock">[cols="1,3",options="header"]</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>|Marker |Effect</p>
</div>
<div class="paragraph">
<p>|force_clean_build
|Will cause virtualenv to recreated during builds.</p>
</div>
<div class="paragraph">
<p>|hot_deploy
|Will prevent shutdown and startup of the application during builds.</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:33%;">
<col style="width:33%;">
<col style="width:33%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">=== Environment variables
The <code>python</code> cartridge supports the following environment variables:
</p><p class="tableblock">OPENSHIFT_PYTHON_WSGI_APPLICATION:: Set custom path to the WSGI entry-point, eg.
using the <code>rhc env set OPENSHIFT_PYTHON_WSGI_APPLICATION=app/altenative-wsgi.py</code>
command.
OPENSHIFT_PYTHON_REQUIREMENTS_PATH:: Set custom path to the pip requirements file,
eg. using the <code>rhc env set OPENSHIFT_PYTHON_REQUIREMENTS_PATH=requirements/production.txt</code>
command.
</p><p class="tableblock">For some frameworks (such as Django) it is possible to set the <code>DEBUG</code> user
environment variable using the <code>rhc env set DEBUG=True</code> command.
In that case, Django will run in <em>debug</em> mode, with more verbose logging and
nice error reporting of HTTP 500 errors.
</p><p class="tableblock"><a id="ruby"></a>
== Ruby
The <code>ruby</code> cartridge provides a bare metal <a href="http://rack.github.io">Rack</a> application with <a href="http://www.ruby-lang.org">Ruby</a>.
</p><p class="tableblock">=== Template Repository Layout
----
tmp/               Temporary storage
public/            Content (images, css, etc. available to the public)
config.ru          This file is used by Rack-based servers to start the application.
.openshift/        Location for OpenShift specific files
    action_hooks/  See the Action Hooks documentation &lt;1&gt;
    markers/       See the Markers section below
----
&lt;1&gt; <a href="oo_user_guide.html#action-hooks">Action Hooks</a> documentation
</p><p class="tableblock">=== Ruby Mirror
OpenShift is mirroring rubygems.org at <a href="http://mirror.ops.rhcloud.com/mirror/ruby/">http://mirror.ops.rhcloud.com/mirror/ruby/</a>
This mirror is on the same network as your application, and your gem download should be faster.
</p><p class="tableblock">To use the OpenShift mirror:
</p><p class="tableblock">. Edit your Gemfile and replace
+
&#8230;.
source <em><a href="https://rubygems.org">https://rubygems.org</a></em>
&#8230;.
+
with
+
&#8230;.
source <em><a href="http://mirror.ops.rhcloud.com/mirror/ruby/">http://mirror.ops.rhcloud.com/mirror/ruby/</a></em>
&#8230;.
. Edit your Gemfile.lock and replace
+
&#8230;.
remote: <a href="https://rubygems.org/">https://rubygems.org/</a>
&#8230;.
+
with
+
&#8230;.
remote: <a href="http://mirror.ops.rhcloud.com/mirror/ruby/">http://mirror.ops.rhcloud.com/mirror/ruby/</a>
&#8230;.
</p><p class="tableblock">=== Rails 3.0
</p><p class="tableblock">There are several approaches how to speed up deployment of yours Rails application to OpenShift.
</p><p class="tableblock">==== Gem installation
</p><p class="tableblock"></p><p class="tableblock">There are two options for deploying a Rails application to OpenShift.
</p><p class="tableblock"><strong>Method 1 (Recommended)</strong><br>
<code>git push</code> your application <code>Gemfile/Gemfile.lock</code>. This will cause the remote OpenShift node to run <code>bundle install --deployment</code> to download and install your dependencies.  Each subsequent git push will use the previously downloaded dependencies as a starting point, so additional downloads will be a delta.
</p><p class="tableblock"><strong>Method 2</strong><br>
<code>git add</code> your <code>.bundle</code> and <code>vendor/bundle</code> directories after running <code>bundle install --deployment</code> locally. Be sure to exclude any gems that have native code or ensure they can run on RHEL x86_64.
</p><p class="tableblock">==== Asset pipeline
</p><p class="tableblock">To prevent a long and unnecessary compilation of assets on application initial deployment and re-deployments, these two steps must be done.
</p><p class="tableblock">Step 1*<br>
It&#8217;s necessary to install <code>sprockets</code> gem by adding the line <code>gem 'turbo-sprockets-rails3'</code> into your Gemfile and run <code>bundle install</code>.
</p><p class="tableblock"><strong>Step 2</strong><br>
After <code>sprockets</code> gem is installed you need to precompile all your assets locally by <code>rake assets:precompile</code>, which compiles all the assets into <code>public/assets</code>. When compiling the assets the sprocket gem creates a file called <code>sources_manifest.yml</code>, located also in <code>public/assets</code>. This manifest contains names of all assets files together with their hash values. This file ensures that only changed assets will be recompiled on re-deployment.
</p><p class="tableblock">==== Load database schema
</p><p class="tableblock">If your Rails application contains a large amount of migrations it&#8217;s good to use <code>db:schema:load</code> on initial deploy and <code>db:migrate</code> on re-deploymnets. You can do this by looking into the database and checking whether one of the DB tables exists.
</p><p class="tableblock">This example checks, in the deploy hook, if the <code>spree_activators</code> table is present in the database.
&#8230;.
if [ echo "use $OPENSHIFT_APP_NAME; show tables"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">mysql</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">grep spree_activators ]
then
    bundle exec rake db:schema:load RAILS_ENV="production"
else
    bundle exec rake db:migrate RAILS_ENV="production"
fi
&#8230;.
</p><p class="tableblock">=== Environment Variables
The <code>ruby</code> cartridge provides several environment variables to reference for ease of use:
</p><p class="tableblock">OPENSHIFT_RUBY_LOGDIR:: Log files go here.
OPENSHIFT_RUBY_VERSION:: The Ruby language version. The valid values are <code>1.8</code> and <code>1.9</code>.
BUNDLE_WITHOUT: Prevents Bundler from installing certain groups specified in the Gemfile.
</p><p class="tableblock">=== Using RAILS_ENV=development
</p><p class="tableblock">In OpenShift you can use the Rails development environment as you do when you
are developing the Rails application locally. To instruct OpenShift to deploy
your application in development mode, you need to set this user-environment
variable:
</p><p class="tableblock">* <code>RAILS_ENV</code> (eg. <code>rhc env set RAILS_ENV=development</code>)
</p><p class="tableblock">When the Rails application run under development environment OpenShift will:
</p><p class="tableblock">* Skip the automatic static asset (re)compilation
* Disable <code>bundle</code> command unless you do modification to the application Gemfile
* Set web server to run your application in <em>development</em> mode
* Skip full restart of the Apache as the code is reloaded automatically
</p><p class="tableblock">The development mode can speed up the development phase of you application in
OpenShift, but it is not recommended to use this mode for production.
</p><p class="tableblock">=== <code>threaddump</code> command
OpenShift&#8217;s CLI tool, <a href="https://rubygems.org/gems/rhc"><code>rhc</code></a>, has a subcommand <code>threaddump</code>. Applications created by this cartridge respond to this command by looking
for the appropriate <code>Rack</code> process, and sending <code>ABRT</code> signal to it. As explained in the <a href="http://www.modrails.com/documentation/Users%20guide%20Apache.html#debugging_frozen">Passenger User Guide</a>, this signal will dump the current thread backtraces but also terminates the processes.
</p><p class="tableblock">[NOTE]
====
* The <code>Rack</code> process may not exist if the application has just started and has not been accessed.
====
</p><p class="tableblock">=== Markers
Adding marker files to <code>.openshift/markers</code> will have the following effects:
</p><p class="tableblock">[cols="1,3",options="header"]</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>|Marker |Effect</p>
</div>
<div class="paragraph">
<p>|force_clean_build
|Will trigger a clean re-bundle during the build cycle.</p>
</div>
<div class="paragraph">
<p>|hot_deploy
|Will prevent shutdown and startup of the application during builds. The Passenger <code>restart.txt</code> file will be used to reload the application.</p>
</div>
<div class="paragraph">
<p>|disable_asset_compilation
|Will prevent assets to be compiled upon application deployment. This marker should be used when deploying application with assets which are already compiled.</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup> 
</colgroup>
</table>

</div>
</div>
</div></div>
<div id="footer">
<div id="footer-text">
<br>
Last updated 2014-04-11 12:51:14 UTC
</div>
<!-- Google Analytics -->
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-40375612-1']);
  _gaq.push(['_setDomainName', 'openshift.github.io']);
  _gaq.push(['_trackPageview']);
  
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  
  $(document).ready(function() {
    _gaq.push(function() {
      $('a:not([href^="http"])').on("click", function(e) {
        e.preventDefault();
        var link = $(this).attr("href");
        _gaq.push(["_trackEvent", "Internal Links", "click", link]);
        setTimeout('document.location = "' + link + '"', 300);
      });
      $('a[href^="http"]').on("click", function(e) {
        e.preventDefault();
        var link = $(this).attr("href");
        _gaq.push(["_trackEvent", "Outbound Links", "click", link]);
        setTimeout('document.location = "' + link + '"', 300);
      });
    });
  });
</script>
<!-- Google Code for Remarketing -->
<script>
  var google_conversion_id = 1007064360;
  var google_conversion_label = "7jfmCMC5ugQQqKqa4AM";
  var google_custom_params = window.google_tag_params;
  var google_remarketing_only = true;
</script>
<script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js"></script>
<noscript>
<div style="display: inline;">
<img alt="" height="1" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1007064360/?value=0&amp;label=7jfmCMC5ugQQqKqa4AM&amp;guid=ON&amp;script=0" style="border-style: none;" width="1">
</div>
</noscript>
</div>
</body>
</html>