<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: ApplicationsController
  
    &mdash; Documentation by YARD 0.8.5.2
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (A)</a> &raquo;
    
    
    <span class="title">ApplicationsController</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: ApplicationsController
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="BaseController.html" title="BaseController (class)">BaseController</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActionController::Base</li>
          
            <li class="next"><span class='object_link'><a href="BaseController.html" title="BaseController (class)">BaseController</a></span></li>
          
            <li class="next">ApplicationsController</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="RestModelHelper.html" title="RestModelHelper (module)">RestModelHelper</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">origin-server/controller/app/controllers/applications_controller.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Application CRUD REST API
</p>


  </div>
</div>
<div class="tags">
  

</div>
  <h2>Constant Summary</h2>
  



  <h2>Constant Summary</h2>
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="OpenShift/Controller/ApiBehavior.html" title="OpenShift::Controller::ApiBehavior (module)">OpenShift::Controller::ApiBehavior</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="OpenShift/Controller/ApiBehavior.html#API_VERSION-constant" title="OpenShift::Controller::ApiBehavior::API_VERSION (constant)">OpenShift::Controller::ApiBehavior::API_VERSION</a></span>, <span class='object_link'><a href="OpenShift/Controller/ApiBehavior.html#SUPPORTED_API_VERSIONS-constant" title="OpenShift::Controller::ApiBehavior::SUPPORTED_API_VERSIONS (constant)">OpenShift::Controller::ApiBehavior::SUPPORTED_API_VERSIONS</a></span></p>




  <h2>Instance Attribute Summary</h2>
  
  <h3 class="inherited">Attributes included from <span class='object_link'><a href="OpenShift/Controller/ApiBehavior.html" title="OpenShift::Controller::ApiBehavior (module)">OpenShift::Controller::ApiBehavior</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="OpenShift/Controller/ApiBehavior.html#requested_api_version-instance_method" title="OpenShift::Controller::ApiBehavior#requested_api_version (method)">#requested_api_version</a></span></p>


  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create-instance_method" title="#create (instance method)">- (RestReply&lt;RestApplication&gt;) <strong>create</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Create a new application.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy-instance_method" title="#destroy (instance method)">- (Object) <strong>destroy</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Create a new application.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#index-instance_method" title="#index (instance method)">- (RestReply&lt;Array&lt;RestApplication&gt;&gt;) <strong>index</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
List all applications.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#show-instance_method" title="#show (instance method)">- (RestReply&lt;RestApplication&gt;) <strong>show</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Retrieve a specific application.
</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="RestModelHelper.html" title="RestModelHelper (module)">RestModelHelper</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="RestModelHelper.html#get_application_rest_cartridges-instance_method" title="RestModelHelper#get_application_rest_cartridges (method)">#get_application_rest_cartridges</a></span>, <span class='object_link'><a href="RestModelHelper.html#get_rest_application-instance_method" title="RestModelHelper#get_rest_application (method)">#get_rest_application</a></span>, <span class='object_link'><a href="RestModelHelper.html#get_rest_cartridge-instance_method" title="RestModelHelper#get_rest_cartridge (method)">#get_rest_cartridge</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="OpenShift/Controller/ApiBehavior.html" title="OpenShift::Controller::ApiBehavior (module)">OpenShift::Controller::ApiBehavior</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="OpenShift/Controller/ApiBehavior.html#check_nolinks-instance_method" title="OpenShift::Controller::ApiBehavior#check_nolinks (method)">#check_nolinks</a></span>, <span class='object_link'><a href="OpenShift/Controller/ApiBehavior.html#check_version-instance_method" title="OpenShift::Controller::ApiBehavior#check_version (method)">#check_version</a></span>, <span class='object_link'><a href="OpenShift/Controller/ApiBehavior.html#get_bool-instance_method" title="OpenShift::Controller::ApiBehavior#get_bool (method)">#get_bool</a></span>, <span class='object_link'><a href="OpenShift/Controller/ApiBehavior.html#get_url-instance_method" title="OpenShift::Controller::ApiBehavior#get_url (method)">#get_url</a></span>, <span class='object_link'><a href="OpenShift/Controller/ApiBehavior.html#new_rest_reply-instance_method" title="OpenShift::Controller::ApiBehavior#new_rest_reply (method)">#new_rest_reply</a></span>, <span class='object_link'><a href="OpenShift/Controller/ApiBehavior.html#nolinks-instance_method" title="OpenShift::Controller::ApiBehavior#nolinks (method)">#nolinks</a></span>, <span class='object_link'><a href="OpenShift/Controller/ApiBehavior.html#set_locale-instance_method" title="OpenShift::Controller::ApiBehavior#set_locale (method)">#set_locale</a></span></p>

  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="OpenShift/Controller/ApiResponses.html" title="OpenShift::Controller::ApiResponses (module)">OpenShift::Controller::ApiResponses</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="OpenShift/Controller/ApiResponses.html#get_error_messages-instance_method" title="OpenShift::Controller::ApiResponses#get_error_messages (method)">#get_error_messages</a></span>, <span class='object_link'><a href="OpenShift/Controller/ApiResponses.html#get_extra_log_args-instance_method" title="OpenShift::Controller::ApiResponses#get_extra_log_args (method)">#get_extra_log_args</a></span>, <span class='object_link'><a href="OpenShift/Controller/ApiResponses.html#render_error-instance_method" title="OpenShift::Controller::ApiResponses#render_error (method)">#render_error</a></span>, <span class='object_link'><a href="OpenShift/Controller/ApiResponses.html#render_exception-instance_method" title="OpenShift::Controller::ApiResponses#render_exception (method)">#render_exception</a></span>, <span class='object_link'><a href="OpenShift/Controller/ApiResponses.html#render_success-instance_method" title="OpenShift::Controller::ApiResponses#render_success (method)">#render_success</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="OpenShift/Controller/Authentication.html" title="OpenShift::Controller::Authentication (module)">OpenShift::Controller::Authentication</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="OpenShift/Controller/Authentication.html#auth_service-instance_method" title="OpenShift::Controller::Authentication#auth_service (method)">#auth_service</a></span>, <span class='object_link'><a href="OpenShift/Controller/Authentication.html#authenticate_basic_via_service-instance_method" title="OpenShift::Controller::Authentication#authenticate_basic_via_service (method)">#authenticate_basic_via_service</a></span>, <span class='object_link'><a href="OpenShift/Controller/Authentication.html#authenticate_bearer_token-instance_method" title="OpenShift::Controller::Authentication#authenticate_bearer_token (method)">#authenticate_bearer_token</a></span>, <span class='object_link'><a href="OpenShift/Controller/Authentication.html#authenticate_broker_key-instance_method" title="OpenShift::Controller::Authentication#authenticate_broker_key (method)">#authenticate_broker_key</a></span>, <span class='object_link'><a href="OpenShift/Controller/Authentication.html#authenticate_request_via_service-instance_method" title="OpenShift::Controller::Authentication#authenticate_request_via_service (method)">#authenticate_request_via_service</a></span>, <span class='object_link'><a href="OpenShift/Controller/Authentication.html#authenticate_user%21-instance_method" title="OpenShift::Controller::Authentication#authenticate_user! (method)">#authenticate_user!</a></span>, <span class='object_link'><a href="OpenShift/Controller/Authentication.html#authenticate_user_from_credentials-instance_method" title="OpenShift::Controller::Authentication#authenticate_user_from_credentials (method)">#authenticate_user_from_credentials</a></span>, <span class='object_link'><a href="OpenShift/Controller/Authentication.html#authentication_types-instance_method" title="OpenShift::Controller::Authentication#authentication_types (method)">#authentication_types</a></span>, <span class='object_link'><a href="OpenShift/Controller/Authentication.html#broker_key_auth-instance_method" title="OpenShift::Controller::Authentication#broker_key_auth (method)">#broker_key_auth</a></span>, <span class='object_link'><a href="OpenShift/Controller/Authentication.html#check_controller_scopes-instance_method" title="OpenShift::Controller::Authentication#check_controller_scopes (method)">#check_controller_scopes</a></span>, <span class='object_link'><a href="OpenShift/Controller/Authentication.html#current_user-instance_method" title="OpenShift::Controller::Authentication#current_user (method)">#current_user</a></span>, <span class='object_link'><a href="OpenShift/Controller/Authentication.html#current_user_scopes-instance_method" title="OpenShift::Controller::Authentication#current_user_scopes (method)">#current_user_scopes</a></span>, <span class='object_link'><a href="OpenShift/Controller/Authentication.html#impersonate-instance_method" title="OpenShift::Controller::Authentication#impersonate (method)">#impersonate</a></span>, <span class='object_link'><a href="OpenShift/Controller/Authentication.html#user_signed_in%3F-instance_method" title="OpenShift::Controller::Authentication#user_signed_in? (method)">#user_signed_in?</a></span></p>

  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="OpenShift/Controller/ActionLog.html" title="OpenShift::Controller::ActionLog (module)">OpenShift::Controller::ActionLog</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="OpenShift/Controller/ActionLog.html#log_action-instance_method" title="OpenShift::Controller::ActionLog#log_action (method)">#log_action</a></span>, <span class='object_link'><a href="OpenShift/Controller/ActionLog.html#log_action_for-instance_method" title="OpenShift::Controller::ActionLog#log_action_for (method)">#log_action_for</a></span>, <span class='object_link'><a href="OpenShift/Controller/ActionLog.html#log_actions_as-instance_method" title="OpenShift::Controller::ActionLog#log_actions_as (method)">#log_actions_as</a></span>, <span class='object_link'><a href="OpenShift/Controller/ActionLog.html#set_logged_request-instance_method" title="OpenShift::Controller::ActionLog#set_logged_request (method)">#set_logged_request</a></span></p>

  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="create-instance_method">
  
    - (<tt><span class='object_link'><a href="RestReply.html" title="RestReply (class)">RestReply</a></span>&lt;<span class='object_link'><a href="RestApplication.html" title="RestApplication (class)">RestApplication</a></span>&gt;</tt>) <strong>create</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Create a new application
</p>
<p>
URL: /domains/:domain_id/applications
</p>
<p>
Action: POST
</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
Application name
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>cartridges</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
List of cartridges to create the application with. There must be one web
framework cartridge in the list.
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>scalable</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
Create a scalable application. Defaults to false.
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>init_git_url</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
<a href="http://git-scm.com" target="_parent" title="Git">Git</a> URI to use as a template when creating the
application
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>gear_profile</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
Gear profile to use for gears when creating the application
</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="RestReply.html" title="RestReply (class)">RestReply</a></span>&lt;<span class='object_link'><a href="RestApplication.html" title="RestApplication (class)">RestApplication</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
Application object
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/controller/app/controllers/applications_controller.rb', line 73</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_create identifier id'>create</span>
  <span class='rubyid_domain_id identifier id'>domain_id</span> <span class='assign token'>=</span> <span class='rubyid_params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:domain_id</span><span class='rbrack token'>]</span>
  <span class='rubyid_app_name identifier id'>app_name</span> <span class='assign token'>=</span> <span class='rubyid_params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span>
  <span class='rubyid_features identifier id'>features</span> <span class='assign token'>=</span> <span class='rubyid_Array constant id'>Array</span><span class='lparen token'>(</span><span class='rubyid_params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:cartridges</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='rubyid_params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:cartridge</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_map identifier id'>map</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_c identifier id'>c</span><span class='bitor op'>|</span> <span class='rubyid_c identifier id'>c</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='rubyid_c identifier id'>c</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span> <span class='colon op'>:</span> <span class='rubyid_c identifier id'>c</span> <span class='rbrace token'>}</span>
  <span class='rubyid_scalable identifier id'>scalable</span> <span class='assign token'>=</span> <span class='rubyid_get_bool identifier id'>get_bool</span><span class='lparen token'>(</span><span class='rubyid_params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:scale</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='rubyid_init_git_url identifier id'>init_git_url</span> <span class='assign token'>=</span> <span class='rubyid_params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:initial_git_url</span><span class='rbrack token'>]</span>
  <span class='rubyid_default_gear_size identifier id'>default_gear_size</span> <span class='assign token'>=</span> <span class='rubyid_params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:gear_profile</span><span class='rbrack token'>]</span>
  <span class='rubyid_default_gear_size identifier id'>default_gear_size</span><span class='dot token'>.</span><span class='rubyid_downcase! fid id'>downcase!</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_default_gear_size identifier id'>default_gear_size</span>

  <span class='rubyid_begin begin kw'>begin</span>
    <span class='comment val'># Use strong consistency to avoid race condition creating domain and app in succession</span>
    <span class='rubyid_domain identifier id'>domain</span> <span class='assign token'>=</span> <span class='rubyid_Domain constant id'>Domain</span><span class='dot token'>.</span><span class='rubyid_with identifier id'>with</span><span class='lparen token'>(</span><span class='rubyid_consistency identifier id'>consistency</span><span class='colon op'>:</span> <span class='symbol val'>:strong</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_find_by identifier id'>find_by</span><span class='lparen token'>(</span><span class='rubyid_owner identifier id'>owner</span><span class='colon op'>:</span> <span class='rubyid_@cloud_user ivar id'>@cloud_user</span><span class='comma token'>,</span> <span class='rubyid_canonical_namespace identifier id'>canonical_namespace</span><span class='colon op'>:</span> <span class='rubyid_domain_id identifier id'>domain_id</span><span class='dot token'>.</span><span class='rubyid_downcase identifier id'>downcase</span><span class='rparen token'>)</span>
    <span class='rubyid_@domain_name ivar id'>@domain_name</span> <span class='assign token'>=</span> <span class='rubyid_domain identifier id'>domain</span><span class='dot token'>.</span><span class='rubyid_namespace identifier id'>namespace</span>
  <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_Mongoid constant id'>Mongoid</span><span class='colon2 op'>::</span><span class='rubyid_Errors constant id'>Errors</span><span class='colon2 op'>::</span><span class='rubyid_DocumentNotFound constant id'>DocumentNotFound</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:not_found</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Domain '#{domain_id}' not found&quot;</span><span class='comma token'>,</span> <span class='integer val'>127</span><span class='comma token'>,</span><span class='string val'>&quot;ADD_APPLICATION&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:unprocessable_entity</span><span class='comma token'>,</span> <span class='string val'>&quot;Application name is required and cannot be blank&quot;</span><span class='comma token'>,</span>
                      <span class='integer val'>105</span><span class='comma token'>,</span> <span class='string val'>&quot;ADD_APPLICATION&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;name&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_app_name identifier id'>app_name</span> <span class='rubyid_or or kw'>or</span> <span class='rubyid_app_name identifier id'>app_name</span><span class='dot token'>.</span><span class='rubyid_empty? fid id'>empty?</span>

  <span class='rubyid_valid_sizes identifier id'>valid_sizes</span> <span class='assign token'>=</span> <span class='rubyid_OpenShift constant id'>OpenShift</span><span class='colon2 op'>::</span><span class='rubyid_ApplicationContainerProxy constant id'>ApplicationContainerProxy</span><span class='dot token'>.</span><span class='rubyid_valid_gear_sizes identifier id'>valid_gear_sizes</span><span class='lparen token'>(</span><span class='rubyid_domain identifier id'>domain</span><span class='dot token'>.</span><span class='rubyid_owner identifier id'>owner</span><span class='rparen token'>)</span>
  <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:unprocessable_entity</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Invalid size: #{default_gear_size}. Acceptable values are #{valid_sizes.join(&quot;,&quot;)}&quot;</span><span class='comma token'>,</span>
                      <span class='integer val'>134</span><span class='comma token'>,</span> <span class='string val'>&quot;ADD_APPLICATION&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;gear_profile&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_default_gear_size identifier id'>default_gear_size</span> <span class='rubyid_and and kw'>and</span> <span class='notop op'>!</span><span class='rubyid_valid_sizes identifier id'>valid_sizes</span><span class='dot token'>.</span><span class='rubyid_include? fid id'>include?</span><span class='lparen token'>(</span><span class='rubyid_default_gear_size identifier id'>default_gear_size</span><span class='rparen token'>)</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_Application constant id'>Application</span><span class='dot token'>.</span><span class='rubyid_where identifier id'>where</span><span class='lparen token'>(</span><span class='rubyid_domain identifier id'>domain</span><span class='colon op'>:</span> <span class='rubyid_domain identifier id'>domain</span><span class='comma token'>,</span> <span class='rubyid_canonical_name identifier id'>canonical_name</span><span class='colon op'>:</span> <span class='rubyid_app_name identifier id'>app_name</span><span class='dot token'>.</span><span class='rubyid_downcase identifier id'>downcase</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_count identifier id'>count</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:unprocessable_entity</span><span class='comma token'>,</span> <span class='dstring node'>&quot;The supplied application name '#{app_name}' already exists&quot;</span><span class='comma token'>,</span> <span class='integer val'>100</span><span class='comma token'>,</span> <span class='string val'>&quot;ADD_APPLICATION&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;name&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_Rails constant id'>Rails</span><span class='dot token'>.</span><span class='rubyid_logger identifier id'>logger</span><span class='dot token'>.</span><span class='rubyid_debug identifier id'>debug</span> <span class='string val'>&quot;Checking to see if user limit for number of apps has been reached&quot;</span>
  <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:unprocessable_entity</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{@cloud_user.login} has already reached the gear limit of #{@cloud_user.max_gears}&quot;</span><span class='comma token'>,</span>
                      <span class='integer val'>104</span><span class='comma token'>,</span> <span class='string val'>&quot;ADD_APPLICATION&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='lparen token'>(</span><span class='rubyid_@cloud_user ivar id'>@cloud_user</span><span class='dot token'>.</span><span class='rubyid_consumed_gears identifier id'>consumed_gears</span> <span class='geq op'>&gt;=</span> <span class='rubyid_@cloud_user ivar id'>@cloud_user</span><span class='dot token'>.</span><span class='rubyid_max_gears identifier id'>max_gears</span><span class='rparen token'>)</span>

  <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:unprocessable_entity</span><span class='comma token'>,</span> <span class='dstring node'>&quot;You must specify a cartridge. Valid values are (#{carts.join(', ')})&quot;</span><span class='comma token'>,</span>
                          <span class='integer val'>109</span><span class='comma token'>,</span> <span class='string val'>&quot;ADD_APPLICATION&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;cartridge&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_features identifier id'>features</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>

  <span class='rubyid_begin begin kw'>begin</span>
    <span class='rubyid_framework_carts identifier id'>framework_carts</span> <span class='assign token'>=</span> <span class='rubyid_CartridgeCache constant id'>CartridgeCache</span><span class='dot token'>.</span><span class='rubyid_cartridge_names identifier id'>cartridge_names</span><span class='lparen token'>(</span><span class='string val'>&quot;web_framework&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:unprocessable_entity</span><span class='comma token'>,</span> <span class='dstring node'>&quot;You must specify a cartridge. Valid values are (#{framework_carts.join(', ')})&quot;</span><span class='comma token'>,</span> <span class='integer val'>109</span><span class='comma token'>,</span> <span class='string val'>&quot;ADD_APPLICATION&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;cartridge&quot;</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_features identifier id'>features</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_framework_cartridges identifier id'>framework_cartridges</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='rubyid_other_cartridges identifier id'>other_cartridges</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='rubyid_features identifier id'>features</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_cart identifier id'>cart</span><span class='bitor op'>|</span>
      <span class='rubyid_framework_cartridges identifier id'>framework_cartridges</span><span class='dot token'>.</span><span class='rubyid_push identifier id'>push</span><span class='lparen token'>(</span><span class='rubyid_cart identifier id'>cart</span><span class='rparen token'>)</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_not not kw'>not</span> <span class='rubyid_framework_carts identifier id'>framework_carts</span><span class='dot token'>.</span><span class='rubyid_include? fid id'>include?</span><span class='lparen token'>(</span><span class='rubyid_cart identifier id'>cart</span><span class='rparen token'>)</span>
      <span class='rubyid_other_cartridges identifier id'>other_cartridges</span><span class='dot token'>.</span><span class='rubyid_push identifier id'>push</span><span class='lparen token'>(</span><span class='rubyid_cart identifier id'>cart</span><span class='rparen token'>)</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_framework_carts identifier id'>framework_carts</span><span class='dot token'>.</span><span class='rubyid_include? fid id'>include?</span><span class='lparen token'>(</span><span class='rubyid_cart identifier id'>cart</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_framework_carts identifier id'>framework_carts</span><span class='dot token'>.</span><span class='rubyid_empty? fid id'>empty?</span>
      <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:unprocessable_entity</span><span class='comma token'>,</span> <span class='string val'>&quot;Unable to determine list of available cartridges.  If the problem persists please contact Red Hat support&quot;</span><span class='comma token'>,</span>
                        <span class='integer val'>109</span><span class='comma token'>,</span> <span class='string val'>&quot;ADD_APPLICATION&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;cartridge&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_framework_cartridges identifier id'>framework_cartridges</span><span class='dot token'>.</span><span class='rubyid_empty? fid id'>empty?</span>
      <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:unprocessable_entity</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Each application must contain one web cartridge.  None of the specified cartridges #{features.to_sentence} is a web cartridge. Please include one of the following cartridges: #{framework_carts.to_sentence}.&quot;</span><span class='comma token'>,</span>
                        <span class='integer val'>109</span><span class='comma token'>,</span> <span class='string val'>&quot;ADD_APPLICATION&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;cartridge&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_framework_cartridges identifier id'>framework_cartridges</span><span class='dot token'>.</span><span class='rubyid_length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>1</span>
      <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:unprocessable_entity</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Each application must contain only one web cartridge.  Please include a single web cartridge from this list: #{framework_carts.to_sentence}.&quot;</span><span class='comma token'>,</span>
                        <span class='integer val'>109</span><span class='comma token'>,</span> <span class='string val'>&quot;ADD_APPLICATION&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;cartridge&quot;</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_app_creation_result identifier id'>app_creation_result</span> <span class='assign token'>=</span> <span class='rubyid_ResultIO constant id'>ResultIO</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span>
    <span class='rubyid_application identifier id'>application</span> <span class='assign token'>=</span> <span class='rubyid_Application constant id'>Application</span><span class='dot token'>.</span><span class='rubyid_create_app identifier id'>create_app</span><span class='lparen token'>(</span><span class='rubyid_app_name identifier id'>app_name</span><span class='comma token'>,</span> <span class='rubyid_features identifier id'>features</span><span class='comma token'>,</span> <span class='rubyid_domain identifier id'>domain</span><span class='comma token'>,</span> <span class='rubyid_default_gear_size identifier id'>default_gear_size</span><span class='comma token'>,</span> <span class='rubyid_scalable identifier id'>scalable</span><span class='comma token'>,</span> <span class='rubyid_app_creation_result identifier id'>app_creation_result</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_init_git_url identifier id'>init_git_url</span><span class='comma token'>,</span> <span class='rubyid_request identifier id'>request</span><span class='dot token'>.</span><span class='rubyid_headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>'User-Agent'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>

    <span class='rubyid_@application_name ivar id'>@application_name</span> <span class='assign token'>=</span> <span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span>
    <span class='rubyid_@application_uuid ivar id'>@application_uuid</span> <span class='assign token'>=</span> <span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_uuid identifier id'>uuid</span>
  <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_OpenShift constant id'>OpenShift</span><span class='colon2 op'>::</span><span class='rubyid_UnfulfilledRequirementException constant id'>UnfulfilledRequirementException</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_e identifier id'>e</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:unprocessable_entity</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Unable to create application for #{e.feature}&quot;</span><span class='comma token'>,</span> <span class='integer val'>109</span><span class='comma token'>,</span> <span class='string val'>&quot;ADD_APPLICATION&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;cartridge&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_OpenShift constant id'>OpenShift</span><span class='colon2 op'>::</span><span class='rubyid_ApplicationValidationException constant id'>ApplicationValidationException</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_e identifier id'>e</span>
    <span class='rubyid_messages identifier id'>messages</span> <span class='assign token'>=</span> <span class='rubyid_get_error_messages identifier id'>get_error_messages</span><span class='lparen token'>(</span><span class='rubyid_e identifier id'>e</span><span class='dot token'>.</span><span class='rubyid_app identifier id'>app</span><span class='rparen token'>)</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:unprocessable_entity</span><span class='comma token'>,</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='string val'>&quot;ADD_APPLICATION&quot;</span><span class='comma token'>,</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_messages identifier id'>messages</span><span class='rparen token'>)</span>
  <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_OpenShift constant id'>OpenShift</span><span class='colon2 op'>::</span><span class='rubyid_UserException constant id'>UserException</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_e identifier id'>e</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:unprocessable_entity</span><span class='comma token'>,</span> <span class='rubyid_e identifier id'>e</span><span class='dot token'>.</span><span class='rubyid_message identifier id'>message</span><span class='comma token'>,</span> <span class='integer val'>109</span><span class='comma token'>,</span> <span class='string val'>&quot;ADD_APPLICATION&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;cartridge&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_Exception constant id'>Exception</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_e identifier id'>e</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:unprocessable_entity</span><span class='comma token'>,</span> <span class='rubyid_e identifier id'>e</span><span class='dot token'>.</span><span class='rubyid_message identifier id'>message</span><span class='comma token'>,</span> <span class='integer val'>109</span><span class='comma token'>,</span> <span class='string val'>&quot;ADD_APPLICATION&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;cartridge&quot;</span><span class='rparen token'>)</span>      
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_user_agent identifier id'>user_agent</span><span class='assign token'>=</span> <span class='rubyid_request identifier id'>request</span><span class='dot token'>.</span><span class='rubyid_headers identifier id'>headers</span><span class='lbrack token'>[</span><span class='string val'>'User-Agent'</span><span class='rbrack token'>]</span>
  
  <span class='rubyid_current_ip identifier id'>current_ip</span> <span class='assign token'>=</span> <span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_group_instances identifier id'>group_instances</span><span class='dot token'>.</span><span class='rubyid_first identifier id'>first</span><span class='dot token'>.</span><span class='rubyid_gears identifier id'>gears</span><span class='dot token'>.</span><span class='rubyid_first identifier id'>first</span><span class='dot token'>.</span><span class='rubyid_get_public_ip_address identifier id'>get_public_ip_address</span> <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_nil nil kw'>nil</span>
  <span class='rubyid_include_cartridges identifier id'>include_cartridges</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='rubyid_params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:include</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='string val'>&quot;cartridges&quot;</span><span class='rparen token'>)</span>
  
  <span class='rubyid_app identifier id'>app</span> <span class='assign token'>=</span> <span class='rubyid_get_rest_application identifier id'>get_rest_application</span><span class='lparen token'>(</span><span class='rubyid_application identifier id'>application</span><span class='comma token'>,</span> <span class='rubyid_domain identifier id'>domain</span><span class='comma token'>,</span> <span class='rubyid_include_cartridges identifier id'>include_cartridges</span><span class='rparen token'>)</span>
  <span class='rubyid_reply identifier id'>reply</span> <span class='assign token'>=</span> <span class='rubyid_new_rest_reply identifier id'>new_rest_reply</span><span class='lparen token'>(</span><span class='symbol val'>:created</span><span class='comma token'>,</span> <span class='string val'>&quot;application&quot;</span><span class='comma token'>,</span> <span class='rubyid_app identifier id'>app</span><span class='rparen token'>)</span>

  <span class='rubyid_messages identifier id'>messages</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rubyid_log_msg identifier id'>log_msg</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;Application #{application.name} was created.&quot;</span>
  <span class='rubyid_messages identifier id'>messages</span><span class='dot token'>.</span><span class='rubyid_push identifier id'>push</span><span class='lparen token'>(</span><span class='rubyid_Message constant id'>Message</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:info</span><span class='comma token'>,</span> <span class='rubyid_log_msg identifier id'>log_msg</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='rubyid_messages identifier id'>messages</span><span class='dot token'>.</span><span class='rubyid_push identifier id'>push</span><span class='lparen token'>(</span><span class='rubyid_Message constant id'>Message</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:info</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{current_ip}&quot;</span><span class='comma token'>,</span> <span class='integer val'>0</span><span class='comma token'>,</span> <span class='string val'>&quot;current_ip&quot;</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='notop op'>!</span><span class='rubyid_current_ip identifier id'>current_ip</span> <span class='rubyid_or or kw'>or</span> <span class='rubyid_current_ip identifier id'>current_ip</span><span class='dot token'>.</span><span class='rubyid_empty? fid id'>empty?</span>

  <span class='rubyid_messages identifier id'>messages</span><span class='dot token'>.</span><span class='rubyid_push identifier id'>push</span><span class='lparen token'>(</span><span class='rubyid_Message constant id'>Message</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:info</span><span class='comma token'>,</span> <span class='rubyid_app_creation_result identifier id'>app_creation_result</span><span class='dot token'>.</span><span class='rubyid_resultIO identifier id'>resultIO</span><span class='dot token'>.</span><span class='rubyid_string identifier id'>string</span><span class='comma token'>,</span> <span class='integer val'>0</span><span class='comma token'>,</span> <span class='symbol val'>:result</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_app_creation_result identifier id'>app_creation_result</span>
  <span class='rubyid_render_success identifier id'>render_success</span><span class='lparen token'>(</span><span class='symbol val'>:created</span><span class='comma token'>,</span> <span class='string val'>&quot;application&quot;</span><span class='comma token'>,</span> <span class='rubyid_app identifier id'>app</span><span class='comma token'>,</span> <span class='string val'>&quot;ADD_APPLICATION&quot;</span><span class='comma token'>,</span> <span class='rubyid_log_msg identifier id'>log_msg</span><span class='comma token'>,</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_messages identifier id'>messages</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="destroy-instance_method">
  
    - (<tt>Object</tt>) <strong>destroy</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Create a new application
</p>
<p>
URL: /domains/:domain_id/applications/:id
</p>
<p>
Action: DELETE
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/controller/app/controllers/applications_controller.rb', line 165</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_destroy identifier id'>destroy</span>
  <span class='rubyid_domain_id identifier id'>domain_id</span> <span class='assign token'>=</span> <span class='rubyid_params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:domain_id</span><span class='rbrack token'>]</span>
  <span class='rubyid_id identifier id'>id</span> <span class='assign token'>=</span> <span class='rubyid_params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:id</span><span class='rbrack token'>]</span>    
  
  <span class='rubyid_begin begin kw'>begin</span>
    <span class='rubyid_domain identifier id'>domain</span> <span class='assign token'>=</span> <span class='rubyid_Domain constant id'>Domain</span><span class='dot token'>.</span><span class='rubyid_find_by identifier id'>find_by</span><span class='lparen token'>(</span><span class='rubyid_owner identifier id'>owner</span><span class='colon op'>:</span> <span class='rubyid_@cloud_user ivar id'>@cloud_user</span><span class='comma token'>,</span> <span class='rubyid_canonical_namespace identifier id'>canonical_namespace</span><span class='colon op'>:</span> <span class='rubyid_domain_id identifier id'>domain_id</span><span class='dot token'>.</span><span class='rubyid_downcase identifier id'>downcase</span><span class='rparen token'>)</span>
    <span class='rubyid_@domain_name ivar id'>@domain_name</span> <span class='assign token'>=</span> <span class='rubyid_domain identifier id'>domain</span><span class='dot token'>.</span><span class='rubyid_namespace identifier id'>namespace</span>
    <span class='rubyid_log_action identifier id'>log_action</span><span class='lparen token'>(</span><span class='string val'>&quot;DELETE_APPLICATION&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Found domain #{domain_id}&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_Mongoid constant id'>Mongoid</span><span class='colon2 op'>::</span><span class='rubyid_Errors constant id'>Errors</span><span class='colon2 op'>::</span><span class='rubyid_DocumentNotFound constant id'>DocumentNotFound</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:not_found</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Domain #{domain_id} not found&quot;</span><span class='comma token'>,</span> <span class='integer val'>127</span><span class='comma token'>,</span> <span class='string val'>&quot;DELETE_APPLICATION&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
  
  <span class='rubyid_begin begin kw'>begin</span>
    <span class='rubyid_application identifier id'>application</span> <span class='assign token'>=</span> <span class='rubyid_Application constant id'>Application</span><span class='dot token'>.</span><span class='rubyid_find_by identifier id'>find_by</span><span class='lparen token'>(</span><span class='rubyid_domain identifier id'>domain</span><span class='colon op'>:</span> <span class='rubyid_domain identifier id'>domain</span><span class='comma token'>,</span> <span class='rubyid_canonical_name identifier id'>canonical_name</span><span class='colon op'>:</span> <span class='rubyid_id identifier id'>id</span><span class='dot token'>.</span><span class='rubyid_downcase identifier id'>downcase</span><span class='rparen token'>)</span>
    <span class='rubyid_@application_name ivar id'>@application_name</span> <span class='assign token'>=</span> <span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span>
    <span class='rubyid_@application_uuid ivar id'>@application_uuid</span> <span class='assign token'>=</span> <span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_uuid identifier id'>uuid</span>
  <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_Mongoid constant id'>Mongoid</span><span class='colon2 op'>::</span><span class='rubyid_Errors constant id'>Errors</span><span class='colon2 op'>::</span><span class='rubyid_DocumentNotFound constant id'>DocumentNotFound</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:not_found</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Application #{id} not found.&quot;</span><span class='comma token'>,</span> <span class='integer val'>101</span><span class='comma token'>,</span><span class='string val'>&quot;DELETE_APPLICATION&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
  
  <span class='comment val'># create tasks to delete gear groups</span>
  <span class='rubyid_begin begin kw'>begin</span>
    <span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_destroy_app identifier id'>destroy_app</span>
  <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_OpenShift constant id'>OpenShift</span><span class='colon2 op'>::</span><span class='rubyid_LockUnavailableException constant id'>LockUnavailableException</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_e identifier id'>e</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:service_unavailable</span><span class='comma token'>,</span> <span class='string val'>&quot;Application is currently busy performing another operation. Please try again in a minute.&quot;</span><span class='comma token'>,</span> <span class='rubyid_e identifier id'>e</span><span class='dot token'>.</span><span class='rubyid_code identifier id'>code</span><span class='comma token'>,</span> <span class='string val'>&quot;DELETE_APPLICATION&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
  
  <span class='rubyid_render_success identifier id'>render_success</span><span class='lparen token'>(</span><span class='symbol val'>:no_content</span><span class='comma token'>,</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='string val'>&quot;DELETE_APPLICATION&quot;</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Application #{id} is deleted.&quot;</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span> 
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="index-instance_method">
  
    - (<tt><span class='object_link'><a href="RestReply.html" title="RestReply (class)">RestReply</a></span>&lt;Array&lt;<span class='object_link'><a href="RestApplication.html" title="RestApplication (class)">RestApplication</a></span>&gt;&gt;</tt>) <strong>index</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
List all applications
</p>
<p>
URL: /domains/:domain_id/applications Action: GET
</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>include</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
Comma seperated list of sub-objects to include in reply. Only
&quot;cartridges&quot; is supported at the moment.
</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="RestReply.html" title="RestReply (class)">RestReply</a></span>&lt;Array&lt;<span class='object_link'><a href="RestApplication.html" title="RestApplication (class)">RestApplication</a></span>&gt;&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
List of applications within the domain
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/controller/app/controllers/applications_controller.rb', line 15</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_index identifier id'>index</span>
  <span class='rubyid_domain_id identifier id'>domain_id</span> <span class='assign token'>=</span> <span class='rubyid_params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:domain_id</span><span class='rbrack token'>]</span>
  <span class='rubyid_begin begin kw'>begin</span>
    <span class='rubyid_domain identifier id'>domain</span> <span class='assign token'>=</span> <span class='rubyid_Domain constant id'>Domain</span><span class='dot token'>.</span><span class='rubyid_find_by identifier id'>find_by</span><span class='lparen token'>(</span><span class='rubyid_owner identifier id'>owner</span><span class='colon op'>:</span> <span class='rubyid_@cloud_user ivar id'>@cloud_user</span><span class='comma token'>,</span> <span class='rubyid_canonical_namespace identifier id'>canonical_namespace</span><span class='colon op'>:</span> <span class='rubyid_domain_id identifier id'>domain_id</span><span class='dot token'>.</span><span class='rubyid_downcase identifier id'>downcase</span><span class='rparen token'>)</span>
    <span class='rubyid_@domain_name ivar id'>@domain_name</span> <span class='assign token'>=</span> <span class='rubyid_domain identifier id'>domain</span><span class='dot token'>.</span><span class='rubyid_namespace identifier id'>namespace</span>
  <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_Mongoid constant id'>Mongoid</span><span class='colon2 op'>::</span><span class='rubyid_Errors constant id'>Errors</span><span class='colon2 op'>::</span><span class='rubyid_DocumentNotFound constant id'>DocumentNotFound</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:not_found</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Domain '#{domain_id}' not found&quot;</span><span class='comma token'>,</span> <span class='integer val'>127</span><span class='comma token'>,</span> <span class='string val'>&quot;LIST_APPLICATIONS&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_include_cartridges identifier id'>include_cartridges</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='rubyid_params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:include</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='string val'>&quot;cartridges&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_apps identifier id'>apps</span> <span class='assign token'>=</span> <span class='rubyid_domain identifier id'>domain</span><span class='dot token'>.</span><span class='rubyid_applications identifier id'>applications</span>
  <span class='rubyid_rest_apps identifier id'>rest_apps</span> <span class='assign token'>=</span> <span class='rubyid_apps identifier id'>apps</span><span class='dot token'>.</span><span class='rubyid_map! fid id'>map!</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_application identifier id'>application</span><span class='bitor op'>|</span> <span class='rubyid_get_rest_application identifier id'>get_rest_application</span><span class='lparen token'>(</span><span class='rubyid_application identifier id'>application</span><span class='comma token'>,</span> <span class='rubyid_domain identifier id'>domain</span><span class='comma token'>,</span> <span class='rubyid_include_cartridges identifier id'>include_cartridges</span><span class='comma token'>,</span> <span class='rubyid_apps identifier id'>apps</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='rubyid_render_success identifier id'>render_success</span><span class='lparen token'>(</span><span class='symbol val'>:ok</span><span class='comma token'>,</span> <span class='string val'>&quot;applications&quot;</span><span class='comma token'>,</span> <span class='rubyid_rest_apps identifier id'>rest_apps</span><span class='comma token'>,</span> <span class='string val'>&quot;LIST_APPLICATIONS&quot;</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Found #{rest_apps.length} applications for domain '#{domain_id}'&quot;</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="show-instance_method">
  
    - (<tt><span class='object_link'><a href="RestReply.html" title="RestReply (class)">RestReply</a></span>&lt;<span class='object_link'><a href="RestApplication.html" title="RestApplication (class)">RestApplication</a></span>&gt;</tt>) <strong>show</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Retrieve a specific application
</p>
<p>
URL: /domains/:domain_id/applications/:id
</p>
<p>
Action: GET
</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="RestReply.html" title="RestReply (class)">RestReply</a></span>&lt;<span class='object_link'><a href="RestApplication.html" title="RestApplication (class)">RestApplication</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
Application object
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'origin-server/controller/app/controllers/applications_controller.rb', line 37</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_show identifier id'>show</span>
  <span class='rubyid_domain_id identifier id'>domain_id</span> <span class='assign token'>=</span> <span class='rubyid_params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:domain_id</span><span class='rbrack token'>]</span>
  <span class='rubyid_id identifier id'>id</span> <span class='assign token'>=</span> <span class='rubyid_params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:id</span><span class='rbrack token'>]</span>
  
  <span class='rubyid_begin begin kw'>begin</span>
    <span class='rubyid_domain identifier id'>domain</span> <span class='assign token'>=</span> <span class='rubyid_Domain constant id'>Domain</span><span class='dot token'>.</span><span class='rubyid_find_by identifier id'>find_by</span><span class='lparen token'>(</span><span class='rubyid_owner identifier id'>owner</span><span class='colon op'>:</span> <span class='rubyid_@cloud_user ivar id'>@cloud_user</span><span class='comma token'>,</span> <span class='rubyid_canonical_namespace identifier id'>canonical_namespace</span><span class='colon op'>:</span> <span class='rubyid_domain_id identifier id'>domain_id</span><span class='dot token'>.</span><span class='rubyid_downcase identifier id'>downcase</span><span class='rparen token'>)</span>
    <span class='rubyid_@domain_name ivar id'>@domain_name</span> <span class='assign token'>=</span> <span class='rubyid_domain identifier id'>domain</span><span class='dot token'>.</span><span class='rubyid_namespace identifier id'>namespace</span>
  <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_Mongoid constant id'>Mongoid</span><span class='colon2 op'>::</span><span class='rubyid_Errors constant id'>Errors</span><span class='colon2 op'>::</span><span class='rubyid_DocumentNotFound constant id'>DocumentNotFound</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:not_found</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Domain '#{domain_id}' not found&quot;</span><span class='comma token'>,</span> <span class='integer val'>127</span><span class='comma token'>,</span> <span class='string val'>&quot;SHOW_APPLICATION&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
  
  <span class='rubyid_begin begin kw'>begin</span>
    <span class='rubyid_application identifier id'>application</span> <span class='assign token'>=</span> <span class='rubyid_Application constant id'>Application</span><span class='dot token'>.</span><span class='rubyid_find_by identifier id'>find_by</span><span class='lparen token'>(</span><span class='rubyid_domain identifier id'>domain</span><span class='colon op'>:</span> <span class='rubyid_domain identifier id'>domain</span><span class='comma token'>,</span> <span class='rubyid_canonical_name identifier id'>canonical_name</span><span class='colon op'>:</span> <span class='rubyid_id identifier id'>id</span><span class='dot token'>.</span><span class='rubyid_downcase identifier id'>downcase</span><span class='rparen token'>)</span>
    <span class='rubyid_include_cartridges identifier id'>include_cartridges</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='rubyid_params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:include</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='string val'>&quot;cartridges&quot;</span><span class='rparen token'>)</span>
    
    <span class='rubyid_@application_name ivar id'>@application_name</span> <span class='assign token'>=</span> <span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span>
    <span class='rubyid_@application_uuid ivar id'>@application_uuid</span> <span class='assign token'>=</span> <span class='rubyid_application identifier id'>application</span><span class='dot token'>.</span><span class='rubyid_uuid identifier id'>uuid</span>
    <span class='rubyid_render_success identifier id'>render_success</span><span class='lparen token'>(</span><span class='symbol val'>:ok</span><span class='comma token'>,</span> <span class='string val'>&quot;application&quot;</span><span class='comma token'>,</span> <span class='rubyid_get_rest_application identifier id'>get_rest_application</span><span class='lparen token'>(</span><span class='rubyid_application identifier id'>application</span><span class='comma token'>,</span> <span class='rubyid_domain identifier id'>domain</span><span class='comma token'>,</span> <span class='rubyid_include_cartridges identifier id'>include_cartridges</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='string val'>&quot;SHOW_APPLICATION&quot;</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Application '#{id}' found&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_rescue rescue kw'>rescue</span> <span class='rubyid_Mongoid constant id'>Mongoid</span><span class='colon2 op'>::</span><span class='rubyid_Errors constant id'>Errors</span><span class='colon2 op'>::</span><span class='rubyid_DocumentNotFound constant id'>DocumentNotFound</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_render_error identifier id'>render_error</span><span class='lparen token'>(</span><span class='symbol val'>:not_found</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Application '#{id}' not found&quot;</span><span class='comma token'>,</span> <span class='integer val'>101</span><span class='comma token'>,</span> <span class='string val'>&quot;SHOW_APPLICATION&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Sun Mar 10 18:18:26 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.5.2 (ruby-1.8.7).
</div>

  </body>
</html>